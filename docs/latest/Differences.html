<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 142--><p class="noindent" >
</p><!--l. 149--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 153--><p class="noindent" >OpenCore
</p><!--l. 157--><p class="noindent" >Reference Manual (0.6<span class="sout">.7</span><span class="uwave">.8</span>)
</p><!--l. 161--><p class="noindent" >[2021.03.24]
</p><!--l. 169--><p class="noindent" >Copyright ©2018-2021 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
<br /> <span class="subsectionToc" >11.10 <a 
href="#x1-7200010" id="QQ2-1-76">Output Properties</a></span>
<br /> <span class="subsectionToc" >11.11 <a 
href="#x1-7300011" id="QQ2-1-77">ProtocolOverrides Properties</a></span>
<br /><span class="sectionToc" >12 <a 
href="#x1-7600012" id="QQ2-1-80">Troubleshooting</a></span>
<br /> <span class="subsectionToc" >12.1 <a 
href="#x1-770001" id="QQ2-1-81">Legacy Apple OS</a></span>
<br /> <span class="subsectionToc" >12.4 <a 
href="#x1-850004" id="QQ2-1-90">Debugging</a></span>
<br /> <span class="subsectionToc" >12.5 <a 
href="#x1-860005" id="QQ2-1-91">Tips and Tricks</a></span>
</div>
<a 
 id="x1-1001r1"></a>
<h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-20001"></a>Introduction</h3>
<!--l. 178--><p class="noindent" >This document provides information on the <span class="uwave">format of the </span><a 
href="https://github.com/acidanthera/OpenCorePkg" >OpenCore</a> user configuration file <span class="sout">format </span>used to set up the correct
functioning of the macOS operating system. It is to be read as the official clarification of expected OpenCore behaviour. All
deviations, if found in published OpenCore releases, shall be considered to be documentation or implementation
issues which should be reported via the <a 
href="https://github.com/acidanthera/bugtracker" >Acidanthera Bugtracker</a>. An errata sheet is available in <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Errata/Errata.pdf" >OpenCorePkg
repository</a>.
</p><!--l. 188--><p class="noindent" >This document is structured as a specification and is not meant to provide a step-by-step guide to configuring an end-user
Board Support Package (BSP). The intended audience of the document is anticipated to be programmers and engineers with a
basic understanding of macOS internals and UEFI functionality. For these reasons, this document is available
exclusively in English, and all other sources or translations of this document are unofficial and may contain
errors.
</p><!--l. 195--><p class="noindent" >Third-party articles, utilities, books, and similar, may be more useful for a wider audience as they could provide
guide-like material. However, they are subject to their authors’ preferences, <span class="sout">tastes, </span>misinterpretations of this
document, and unavoidable obsolescence. In cases of using such sources, such as <a 
href="https://dortania.github.io" >Dortania</a>’s <a 
href="https://dortania.github.io/OpenCore-Install-Guide" >OpenCore Install
Guide</a> and <a 
href="https://dortania.github.io/getting-started" >related material</a>, please refer back to this document on every decision made and re-evaluate potential
<span class="sout">consequences</span><span class="uwave">implications</span>.
</p><!--l. 203--><p class="noindent" >Please note that regardless of the sources used, users are required to fully understand every OpenCore configuration option,
and the principles behind them, before posting issues to the <a 
href="https://github.com/acidanthera/bugtracker" >Acidanthera Bugtracker</a>.
</p><!--l. 207--><p class="noindent" >Note: Creating this document would not have been possible without the invaluable contributions from other people:
Andrey1970, Goldfish64, dakanji, PMheart, and several others, with the full list available in <a 
href="https://github.com/acidanthera/OpenCorePkg/commits/master/Docs" >OpenCorePkg
history</a>.
<a 
 id="x1-2001r1"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-30001"></a>Generic Terms</h4>
     <ul class="itemize1">
     <li class="itemize">plist —  Subset  of  ASCII  Property  List  format  written  in  XML,  also  know  as  XML  plist  format  version
     1.  Uniform  Type  Identifier  (UTI):  com.apple.property-list.  Plists  consist  of  plist objects,  which  are
     combined to form a hierarchical structure. Due to plist format not being well-defined, all the definitions of this
     document may only be applied after plist is considered valid by running plutil -lint. External references:
     https://www.apple.com/DTDs/PropertyList-1.0.dtd, man plutil.
     </li>
     <li class="itemize">plist type — plist collections (plist array, plist dictionary, plist key) and primitives (plist string,
     plist data, plist date, plist boolean, plist integer, plist real).
     </li>
     <li class="itemize">plist object — definite realisation of plist type, which may be interpreted as value.
     </li>
     <li class="itemize">plist array — array-like collection, conforms to array. Consists of zero or more plist objects.
     </li>
     <li class="itemize">plist dictionary —  map-like  (associative  array)  collection,  conforms  to  dict.  Consists  of  zero  or  more
                                                                                                  
                                                                                                  
     provided in specific plist object description (instead of invalid value) when not present in OC config. All
     other cases of invalid value do still apply. Unless explicitly marked as optional value, any other value is
     required to be present and reads to invalid value if missing.
     </li>
     <li class="itemize">fatal behaviour — behaviour leading to boot termination. Implementations shall prevent the boot process
     from continuing until the host system is restarted. It is permitted, but not required, to execute cold reboots or
     to show warning messages in such cases.
     </li>
     <li class="itemize">undefined behaviour — behaviour not prescribed by this document. Implementations may take any measures
     including, but not limited to, measures associated with fatal behaviour, assumptions of any state or value, or
     disregarding any associated states or values. This is however subject to such measures not negatively impacting
     upon system integrity.</li></ul>
<a 
 id="x1-5001r6"></a>
<h4 class="subsectionHead"><span class="titlemark">2.2   </span> <a 
 id="x1-60002"></a>Configuration Processing</h4>
<!--l. 341--><p class="noindent" >The OC config file is guaranteed to be processed at least once if found. <span class="sout">Depending on </span><span class="uwave">Subject to the </span>OpenCore bootstrapping
mechanism, the presence of multiple OC config files may lead to the reading of any of them. It is permissible for no OC Config
file to be present on disk. In such cases, if the implementation does not abort the boot process, all values shall follow the rules
of invalid values and optional values.
</p><!--l. 348--><p class="noindent" >The OC config file has restrictions on size, nesting levels, and number of keys:
</p>
     <ul class="itemize1">
     <li class="itemize">The OC config file size shall not exceed 32 MBs.
     </li>
     <li class="itemize">The OC config file shall not have more than 32 nesting levels.
     </li>
     <li class="itemize">The OC config file may have up to 32,768 XML nodes within each plist object.
         <ul class="itemize2">
         <li class="itemize">One plist dictionary item is counted as a pair of nodes</li></ul>
     </li></ul>
<!--l. 365--><p class="noindent" >Reading malformed OC config files results in undefined behaviour. Examples of malformed OC config files include the
following:
</p>
     <ul class="itemize1">
     <li class="itemize">OC config files that do not conform to DTD PLIST 1.0.
     </li>
     <li class="itemize">OC config files with unsupported or non-conformant plist objects found in this document.
     </li>
     <li class="itemize">OC config files violating restrictions on size, nesting levels, and number of keys.</li></ul>
<!--l. 380--><p class="noindent" >It is recommended, but not required, to abort loading malformed OC config files and to continue as if an OC config file is not
present. For forward compatibility, it is recommended, but not required, for the implementation to warn about the use of
invalid values.
</p><!--l. 385--><p class="noindent" >The recommended <span class="sout">practice for </span><span class="uwave">approach to </span>interpreting invalid values is to conform to the following convention where
applicable:
</p>
<div class="center" 
>
<!--l. 388--><p class="noindent" >
</p>
                                                                                                  
                                                                                                  
     </li>
     <li class="itemize">Use DEBUG_INFO debug level for all non critical messages (including errors) and DEBUG_BULK_INFO for extensive
     messages that should not appear in NVRAM log that is heavily limited in size. These messages are ignored in
     RELEASE builds.
     </li>
     <li class="itemize">Use DEBUG_ERROR to print critical human visible messages that may potentially halt the boot process, and
     DEBUG_WARN for all other human visible errors, RELEASE builds included.</li></ul>
<!--l. 853--><p class="noindent" >The <a 
href="https://git-scm.com/docs/git-bisect" >git-bisect</a> functionality may be useful when trying to find problematic changes. Unofficial sources of per-commit
OpenCore binary builds, such as <a 
href="https://dortania.github.io/builds" >Dortania</a>, may also be useful.
<a 
 id="x1-13001r9"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-140004"></a>ACPI</h3>
<a 
 id="x1-14001r16"></a>
<h4 class="subsectionHead"><span class="titlemark">4.1   </span> <a 
 id="x1-150001"></a>Introduction</h4>
<!--l. 861--><p class="noindent" >ACPI (Advanced Configuration and Power Interface) is an open standard to discover and configure computer hardware. The
<a 
href="https://uefi.org/specifications" >ACPI specification</a> <span class="sout">define the </span><span class="uwave">defines </span>standard tables (e.g. DSDT, SSDT, FACS, DMAR) and various methods (e.g. _DSM, _PRW) for
implementation. Modern hardware needs <span class="sout">little </span><span class="uwave">few </span>changes to maintain ACPI compatibility <span class="sout">, yet some of those </span><span class="uwave">and some
options for such changes </span>are provided as <span class="sout">a </span>part of OpenCore.
</p><!--l. 872--><p class="noindent" >To compile and disassemble ACPI tables, the <a 
href="https://github.com/acpica/acpica" >iASL compiler</a> developed by <a 
href="https://www.acpica.org" >ACPICA</a> can be used. A GUI front-end to iASL
compiler can be downloaded from <a 
href="https://github.com/acidanthera/MaciASL/releases" >Acidanthera/MaciASL</a>.
</p><!--l. 876--><p class="noindent" >ACPI changes apply globally (to every operating system) with the following effective order:
</p>
     <ul class="itemize1">
     <li class="itemize">Patch is processed.
     </li>
     <li class="itemize">Delete is processed.
     </li>
     <li class="itemize">Add is processed.
     </li>
     <li class="itemize">Quirks are processed.</li></ul>
<!--l. 886--><p class="noindent" >Applying the changes globally resolves the problems of incorrect operating system detection (consistent with the ACPI
specification, not possible before the operating system boots), operating system chainloading, and difficult ACPI debugging.
Hence, more attention may be required when writing changes to _OSI.
</p><!--l. 891--><p class="noindent" >Applying the patches early makes it possible to write so called “proxy” patches, where the original method is patched in the
original table and is implemented in the patched table.
</p><!--l. 895--><p class="noindent" >There are several sources of ACPI tables and workarounds. Commonly used ACPI tables are provided with OpenCore,
VirtualSMC, VoodooPS2, and WhateverGreen releases. Besides those, several third-party instructions may be found on the
AppleLife <a 
href="https://applelife.ru/forums/xakintosh.67" >Laboratory</a> and <a 
href="https://applelife.ru/forums/dsdt.129" >DSDT</a> subforums (e.g. <a 
href="https://applelife.ru/posts/498967" >Battery register splitting</a> guide). A slightly more user-friendly explanation of
some tables included with OpenCore can also be found in <a 
href="https://dortania.github.io" >Dortania</a>’s <a 
href="https://dortania.github.io/Getting-Started-With-ACPI" >Getting started with ACPI</a> guide. For more exotic cases,
there are several alternatives such as <a 
href="https://github.com/daliansky" >daliansky</a>’s <a 
href="https://github.com/daliansky/OC-little" >ACPI sample collection</a>. Note however that the quality of the suggested
solutions will be variable.
<a 
 id="x1-15001r18"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.2   </span> <a 
 id="x1-160002"></a>Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-16002x1">Add<br 
class="newline" />Type: plist array<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Load selected tables from the OC/ACPI directory.
     <!--l. 919--><p class="noindent" >Designed to be filled with plist dict values, describing each add entry. See the ?? section below.
                                                                                                  
                                                                                                  
     <li 
  class="enumerate" id="x1-18004x2">Comment<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Arbitrary ASCII string used to provide human readable reference for the entry. Whether this value
     is used is implementation defined.
     </li>
     <li 
  class="enumerate" id="x1-18006x3">Enabled<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Set to true to remove this ACPI table.
     </li>
     <li 
  class="enumerate" id="x1-18008x4">OemTableId<br 
class="newline" />Type: plist data, 8 bytes<br 
class="newline" />Failsafe: All zero (Match any table OEM ID)<br 
class="newline" />Description: Match table OEM ID equal to this value.
     </li>
     <li 
  class="enumerate" id="x1-18010x5">TableLength<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0 (Match any table size)<br 
class="newline" />Description: Match table size equal to this value.
     </li>
     <li 
  class="enumerate" id="x1-18012x6">TableSignature<br 
class="newline" />Type: plist data, 4 bytes<br 
class="newline" />Failsafe: All zero (Match any table signature)<br 
class="newline" />Description: Match table signature equal to this value.
     <!--l. 1023--><p class="noindent" >Note: Do not use table signatures when the sequence must be replaced in multiple places. This is particularly
     relevant when performing different types of renames.
</p>
     </li></ol>
<a 
 id="x1-18013r21"></a>
<h4 class="subsectionHead"><span class="titlemark">4.5   </span> <a 
 id="x1-190005"></a>Patch Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-19002x1"><span class="uwave">Base</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist string</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: Empty (Ignored)</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Selects ACPI path base for patch lookup (or immediate replacement) by obtaining the offset to
     the provided path. </span>
     <!--l. 1041--><p class="noindent" ><span class="uwave">Only fully-qualified absolute paths are supported (e.g. </span><span class="uwave">\_SB.PCI0.LPCB.HPET</span><span class="uwave">). Currently supported object types
     are: </span><span class="uwave">Device</span><span class="uwave">, </span><span class="uwave">Field</span><span class="uwave">, </span><span class="uwave">Method</span><span class="uwave">. </span>
     </p><!--l. 1045--><p class="noindent" ><span class="uwave">Note</span><span class="uwave">: Use with care, not all OEM tables can be parsed. Use </span><span class="uwave">ACPIe</span> <span class="uwave">utility to debug. </span><span class="uwave">ACPIe</span> <span class="uwave">compiled with </span><span class="uwave">DEBUG=1
     make</span> <span class="uwave">command produces helpful ACPI lookup tracing. </span>
     </p></li>
     <li 
  class="enumerate" id="x1-19004x2"><span class="uwave">BaseSkip</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist integer</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">0</span> <span class="uwave">(Do not skip any occurrences)</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Number of found </span><span class="uwave">Base</span> <span class="uwave">occurrences to skip before finds and replacements are applied. </span>
     </li>
     <li 
  class="enumerate" id="x1-19006x3">Comment<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Arbitrary ASCII string used to provide human readable reference for the entry. Whether this value
                                                                                                  
                                                                                                  
     is used is implementation defined.
     </li>
     <li 
  class="enumerate" id="x1-19008x4">Count<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0 (Apply patch to all occurrences found)<br 
class="newline" />Description: Number of occurrences to patch.
     </li>
     <li 
  class="enumerate" id="x1-19010x5">Enabled<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Set to true to apply this ACPI patch.
     </li>
     <li 
  class="enumerate" id="x1-19012x6">Find<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Data to find. Must be equal to Replace in size if set.
     <!--l. 1083--><p class="noindent" ><span class="uwave">Note</span><span class="uwave">: Can be empty, when </span><span class="uwave">Base</span> <span class="uwave">is specified, immediate replacement after </span><span class="uwave">Base</span> <span class="uwave">lookup happens in this case. </span>
     </p></li>
     <li 
  class="enumerate" id="x1-19014x7">Limit<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0 (Search entire ACPI table)<br 
class="newline" />Description: Maximum number of bytes to search for.
     </li>
     <li 
  class="enumerate" id="x1-19016x8">Mask<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty (Ignored)<br 
class="newline" />Description: Data bitwise mask used during find comparison. Allows fuzzy search by ignoring not masked (set
     to zero) bits. Must be equal to Replace in size if set.
     </li>
     <li 
  class="enumerate" id="x1-19018x9">OemTableId<br 
class="newline" />Type: plist data, 8 bytes<br 
class="newline" />Failsafe: All zero (Match any table OEM ID)<br 
class="newline" />Description: Match table OEM ID equal to this value.
     </li>
     <li 
  class="enumerate" id="x1-19020x10">Replace<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Replacement data of one or more bytes.
     </li>
     <li 
  class="enumerate" id="x1-19022x11">ReplaceMask<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty (Ignored)<br 
class="newline" />Description: Data bitwise mask used during replacement. Allows fuzzy replacement by updating masked (set
     to non-zero) bits. Must be equal to Replace in size if set.
     </li>
     <li 
  class="enumerate" id="x1-19024x12">Skip<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0 (Do not skip any occurrences)<br 
class="newline" />Description: Number of found occurrences to skip before replacements are applied.
     </li>
     <li 
  class="enumerate" id="x1-19026x13">TableLength<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0 (Match any table size)<br 
class="newline" />Description: Match table size equal to this value.
     </li>
     <li 
  class="enumerate" id="x1-19028x14">TableSignature<br 
class="newline" />Type: plist data, 4 bytes<br 
class="newline" />Failsafe: All zero (Match any table signature)<br 
class="newline" />Description: Match table signature equal to this value.
     </li></ol>
<!--l. 1142--><p class="noindent" >In most cases, ACPI patches are not useful and are harmful:
</p>
     <ul class="itemize1">
     <li class="itemize">Avoid renaming devices with ACPI patches. This may fail or perform improper renaming of unrelated devices
     (e.g. EC and EC0), be unnecessary, or even fail to rename devices in certain tables. For ACPI consistency it is
     much safer to rename devices at the I/O Registry level, as done by <a 
href="https://github.com/acidanthera/WhateverGreen" >WhateverGreen</a>.
     </li>
     <li class="itemize">Avoid patching _OSI to support a higher feature set level whenever possible. While this enables a number of
     workarounds on APTIO firmware, it typically results in a need for additional patches. <span class="sout">Modern firmware generally
     does not need this </span><span class="uwave">These are not usually needed on modern firmware </span>and smaller patches work well on firmware
     that does. However, laptop vendors often rely on this method to determine the availability of functions such as
     modern I2C input support, thermal adjustment and custom feature additions.
     </li>
     <li class="itemize">Avoid patching embedded controller event _Qxx just to enable brightness keys. The conventional process to find
     these keys typically involves significant modifications to DSDT and SSDT files and in addition, the debug kext
     is not stable on newer systems. Please use the built-in brightness key discovery in <a 
href="https://github.com/acidanthera/BrightnessKeys" >BrightnessKeys</a> instead.
     </li>
     <li class="itemize">Avoid making ad hoc changes such as renaming _PRW or _DSM whenever possible.</li></ul>
<!--l. 1172--><p class="noindent" >Some cases where patching is actually useful include:
</p>
     <ul class="itemize1">
     <li class="itemize">Refreshing HPET (or another device) method header to avoid compatibility checks by _OSI on legacy hardware.
     _STA method  with  if ((OSFL () == Zero)) { If (HPTE) ... Return (Zero) content  may  be  forced  to
     always return 0xF by replacing A0 10 93 4F 53 46 4C 00 with A4 0A 0F A3 A3 A3 A3 A3.
     </li>
     <li class="itemize">To provide a custom method implementation within an SSDT, to inject shutdown fixes on certain computers for
     instance, the original method can be replaced with a dummy name by patching _PTS with ZPTS and adding a
     callback to the original method.</li></ul>
<!--l. 1188--><p class="noindent" >The Tianocore <a 
href="https://github.com/acidanthera/audk/blob/master/MdePkg/Include/IndustryStandard/AcpiAml.h" >AcpiAml.h</a> source file may help with better understanding ACPI opcodes.
</p><!--l. 1190--><p class="noindent" >Note: Patches of different Find and Replace lengths are unsupported as they may corrupt ACPI tables and make the system
unstable due to area relocation. If such changes are needed, the utilisation of “proxy” patching or the padding of NOP to the
remaining area could be considered.
<a 
 id="x1-19029r22"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.6   </span> <a 
 id="x1-200006"></a>Quirks Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-20002x1">FadtEnableReset<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Provide reset register and flag in FADT table to enable reboot and shutdown.
     <!--l. 1206--><p class="noindent" >Mainly  required  on  legacy  hardware  and  a  few  newer  laptops.  Can  also  fix  power-button  shortcuts.  Not
     recommended unless required.
                                                                                                  
                                                                                                  
     <ul class="itemize1">
     <li class="itemize">Most up-to-date UEFI firmware (check the motherboard vendor website).
     </li>
     <li class="itemize">Fast Boot and Hardware Fast Boot disabled in firmware settings if present.
     </li>
     <li class="itemize">Above 4G Decoding or  similar  enabled  in  firmware  settings  if  present.  Note  that  on  some  motherboards,
     notably the ASUS WS-X299-PRO, this option results in adverse effects and must be disabled. While no other
     motherboards with the same issue are known, this option should be checked first whenever erratic boot failures
     are encountered.
     </li>
     <li class="itemize">DisableIoMapper quirk enabled, or VT-d disabled in firmware settings if present, or ACPI DMAR table deleted.
     </li>
     <li class="itemize">No ‘slide‘ boot argument present in NVRAM or anywhere else. It is not necessary unless the system cannot be
     booted at all or No slide values are usable! Use custom slide! message can be seen in the log.
     </li>
     <li class="itemize">CFG Lock (MSR 0xE2 write protection) disabled in firmware settings if present. Consider <a 
href="https://github.com/LongSoft/UEFITool/blob/master/UEFIPatch/patches.txt" >patching it</a> if no option
     is available (for advanced users only). See <a 
href="#x1-390008">ControlMsrE2</a> notes for more details.
     </li>
     <li class="itemize">CSM (Compatibility Support Module) disabled in firmware settings if present. On NVIDIA 6xx/AMD 2xx or
     older, GOP ROM may have to be flashed first. Use <a 
href="https://www.win-raid.com/t892f16-AMD-and-Nvidia-GOP-update-No-requests-DIY.html" >GopUpdate</a> (see the second post) or <a 
href="http://www.insanelymac.com/forum/topic/299614-asus-eah6450-video-bios-uefi-gop-upgrade-and-gop-uefi-binary-in-efi-for-many-ati-cards/page-1#entry2042163" >AMD UEFI GOP
     MAKER</a> in case of any potential confusion.
     </li>
     <li class="itemize">EHCI/XHCI Hand-off enabled in firmware settings only if boot stalls unless USB devices are disconnected.
     </li>
     <li class="itemize">VT-x, Hyper Threading, Execute Disable Bit enabled in firmware settings if present.
     </li>
     <li class="itemize">While it may not be required, sometimes Thunderbolt support, Intel SGX, and Intel Platform Trust may
     have to be disabled in firmware settings present.</li></ul>
<!--l. 1323--><p class="noindent" >When debugging sleep issues, Power Nap and automatic power off (which appear to sometimes cause wake to black screen or
boot loop issues on older platforms) may be temporarily disabled. The specific issues may vary, but <span class="sout">generally </span>ACPI tables
should <span class="uwave">typically </span>be looked at first.
</p><!--l. 1327--><p class="noindent" >Here is an example of a defect found <span class="sout">in </span><span class="uwave">on </span>some <a 
href="http://www.insanelymac.com/forum/topic/329624-need-cmos-reset-after-sleep-only-after-login/#entry2534645" >Z68 motherboards</a>. To turn Power Nap and the others off, run the following
commands in Terminal: </p><!--l. 1330-->
<div class="lstlisting" id="listing-3"><span class="label"><a 
 id="x1-22001r1"></a></span>sudo pmset autopoweroff 0 <br /><span class="label"><a 
 id="x1-22002r2"></a></span>sudo pmset powernap 0 <br /><span class="label"><a 
 id="x1-22003r3"></a></span>sudo pmset standby 0
</div>
<!--l. 1336--><p class="noindent" >Note: These settings may be reset by hardware changes and in certain other circumstances. To view their current state, use the
pmset -g command in Terminal.
<a 
 id="x1-22004r25"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">5.2   </span> <a 
 id="x1-230002"></a>Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-23002x1">MmioWhitelist<br 
class="newline" />Type: plist array<br 
class="newline" />Description: Designed to be filled with plist dict values, describing addresses critical for particular firmware
     functioning when DevirtualiseMmio quirk is in use. See the ?? section below.
     </li>
     <li 
  class="enumerate" id="x1-23004x2">Patch<br 
class="newline" />Type: plist array<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Perform binary patches in booter.
     <!--l. 1357--><p class="noindent" >Designed to be filled with plist dictionary values, describing each patch. See the ?? section below.
                                                                                                  
                                                                                                  
     </li>
     <li 
  class="enumerate" id="x1-25010x5">Find<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Data to find. Must be equal to Replace in size if set.
     </li>
     <li 
  class="enumerate" id="x1-25012x6">Identifier<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Any (Match any booter)<br 
class="newline" />Description:  Apple for  macOS  booter  (<span class="sout">generally  </span><span class="uwave">typically  </span>boot.efi);  or  a  name  with  a  suffix,  such  as
     bootmgfw.efi, for a specific booter.
     </li>
     <li 
  class="enumerate" id="x1-25014x7">Limit<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0 (Search the entire booter)<br 
class="newline" />Description: Maximum number of bytes to search for.
     </li>
     <li 
  class="enumerate" id="x1-25016x8">Mask<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty (Ignored)<br 
class="newline" />Description: Data bitwise mask used during find comparison. Allows fuzzy search by ignoring not masked (set
     to zero) bits. Must be equal to Find in size if set.
     </li>
     <li 
  class="enumerate" id="x1-25018x9">Replace<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Replacement data of one or more bytes.
     </li>
     <li 
  class="enumerate" id="x1-25020x10">ReplaceMask<br 
class="newline" />Type: plist data<br 
class="newline" />Failsafe: Empty (Ignored)<br 
class="newline" />Description: Data bitwise mask used during replacement. Allows fuzzy replacement by updating masked (set
     to non-zero) bits. Must be equal to Replace in size if set.
     </li>
     <li 
  class="enumerate" id="x1-25022x11">Skip<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0 (Do not skip any occurrences)<br 
class="newline" />Description: Number of found occurrences to skip before replacements are applied.
     </li></ol>
<a 
 id="x1-25023r28"></a>
<h4 class="subsectionHead"><span class="titlemark">5.5   </span> <a 
 id="x1-260005"></a>Quirks Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-26002x1">AllowRelocationBlock<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Allows booting macOS through a relocation block.
     <!--l. 1488--><p class="noindent" >The relocation block is a scratch buffer allocated in the lower 4 GB used for loading the kernel and related
     structures  by  EfiBoot  on  firmware  where  the  lower  memory  region  is  otherwise  occupied  by  (assumed)
     non-runtime data. Right before kernel startup, the relocation block is copied back to lower addresses. Similarly,
     all the other addresses pointing to the relocation block are also carefully adjusted. The relocation block can be
     used when:
</p>
                                                                                                  
                                                                                                  
     unable to write variables to NVRAM and results in operating system failures.
     </p></li>
     <li 
  class="enumerate" id="x1-26012x6">DiscardHibernateMap<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Reuse original hibernate memory map.
     <!--l. 1577--><p class="noindent" >This option forces the XNU kernel to ignore a newly supplied memory map and assume that it did not change after
     waking from hibernation. This behaviour is required by Windows to work. Windows mandates <a 
href="https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-uefi#hibernation-state-s4-transition-requirements" >preserving</a> runtime
     memory size and location after S4 wake.
     </p><!--l. 1583--><p class="noindent" >Note: This may be used to workaround defective memory map implementations on older, rare legacy hardware. Examples
     of such hardware are Ivy Bridge laptops with Insyde firmware such as the Acer V3-571G. Do not use this option without
     a full understanding of the implications.
     </p></li>
     <li 
  class="enumerate" id="x1-26014x7">EnableSafeModeSlide<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Patch bootloader to have KASLR enabled in safe mode.
     <!--l. 1593--><p class="noindent" >This option is relevant to users with issues booting to safe mode (e.g. by holding shift or with using the -x boot
     argument). By default, safe mode forces 0 slide as if the system was launched with the slide=0 boot
     argument.
</p>
         <ul class="itemize1">
         <li class="itemize">This quirk attempts to patch the boot.efi file to remove this limitation and to allow using other values
         (from 1 to 255 inclusive).
         </li>
         <li class="itemize">This quirk requires enabling ProvideCustomSlide.</li></ul>
     <!--l. 1605--><p class="noindent" >Note: The need for this option is dependent on the availability of safe mode. It can be enabled when booting to safe mode
     fails.
     </p></li>
     <li 
  class="enumerate" id="x1-26016x8">EnableWriteUnprotector<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Permit write access to UEFI runtime services code.
     <!--l. 1614--><p class="noindent" >This option bypasses R<span class='accenthat'>X</span> permissions in code pages of UEFI runtime services by removing write protection (WP) bit from
     CR0 register during their execution. This quirk requires OC_FIRMWARE_RUNTIME protocol implemented in
     OpenRuntime.efi.
     </p><!--l. 1619--><p class="noindent" >Note: This quirk may potentially weaken firmware security. Please use RebuildAppleMemoryMap if the firmware supports
     memory attributes table (MAT). Refer to the OCABC: MAT support is 1/0 log entry to determine whether MAT is
     supported.
     </p></li>
     <li 
  class="enumerate" id="x1-26018x9"><span class="uwave">ForceBooterSignature</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist boolean</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">false</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Set macOS </span><span class="uwave">boot-signature</span> <span class="uwave">to OpenCore launcher. </span>
     <!--l. 1634--><p class="noindent" ><span class="uwave">Booter signature, essentially a SHA-1 hash of the loaded image, is used by Mac EFI to verify the authenticity of the
     bootloader when waking from hibernation. This option forces macOS to use OpenCore launcher SHA-1 hash as a booter
     signature to let OpenCore shim hibernation wake on Mac EFI firmware. </span>
     </p><!--l. 1636--><p class="noindent" ><span class="uwave">Note</span><span class="uwave">: OpenCore launcher path is determined from </span><span class="uwave">LauncherPath</span> <span class="uwave">property. </span>
     </p></li>
     <li 
  class="enumerate" id="x1-26020x10">ForceExitBootServices                                                                                                                                                                                                                                            <br 
class="newline" /> ailsafe: Empty<br 
class="newline" />Description: Arbitrary ASCII string used to provide human readable reference for the entry. Whether this value
     is used is implementation defined.
     </li>
     <li 
  class="enumerate" id="x1-75006x3">Size<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Size of the reserved memory region, must be page-aligned (4 KBs).
     </li>
     <li 
  class="enumerate" id="x1-75008x4">Type<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Reserved<br 
class="newline" />Description: Memory region type matching the UEFI specification memory descriptor types. Mapping:
         <ul class="itemize1">
         <li class="itemize">Reserved — EfiReservedMemoryType
         </li>
         <li class="itemize">LoaderCode — EfiLoaderCode
         </li>
         <li class="itemize">LoaderData — EfiLoaderData
         </li>
         <li class="itemize">BootServiceCode — EfiBootServicesCode
         </li>
         <li class="itemize">BootServiceData — EfiBootServicesData
         </li>
         <li class="itemize">RuntimeCode — EfiRuntimeServicesCode
         </li>
         <li class="itemize">RuntimeData — EfiRuntimeServicesData
         </li>
         <li class="itemize">Available — EfiConventionalMemory
         </li>
         <li class="itemize">Persistent — EfiPersistentMemory
         </li>
         <li class="itemize">UnusableMemory — EfiUnusableMemory
         </li>
         <li class="itemize">ACPIReclaimMemory — EfiACPIReclaimMemory
         </li>
         <li class="itemize">ACPIMemoryNVS — EfiACPIMemoryNVS
         </li>
         <li class="itemize">MemoryMappedIO — EfiMemoryMappedIO
         </li>
         <li class="itemize">MemoryMappedIOPortSpace — EfiMemoryMappedIOPortSpace
         </li>
         <li class="itemize">PalCode — EfiPalCode</li></ul>
     </li>
     <li 
  class="enumerate" id="x1-75010x5">Enabled<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: This region will not be reserved unless set to true.
     </li></ol>
<a 
 id="x1-75011r65"></a>
<h3 class="sectionHead"><span class="titlemark">12   </span> <a 
 id="x1-7600012"></a>Troubleshooting</h3>
<a 
 id="x1-76001r79"></a>
                                                                                                  
                                                                                                  
<h4 class="subsectionHead"><span class="titlemark">12.1   </span> <a 
 id="x1-770001"></a>Legacy Apple OS</h4>
<!--l. 7075--><p class="noindent" >Older operating systems may be more complicated to install, but <span class="sout">sometimes can be necessary to use for all kinds of
</span><span class="uwave">are sometimes necessary for various </span>reasons. While a compatible board identifier and CPUID are the obvious
requirements for proper functioning of an older operating system, there are many other less obvious things to
consider. This section <span class="sout">tries to cover </span><span class="uwave">covers </span>a common set of issues relevant to installing older macOS operating
systems.
</p><!--l. 7083--><p class="noindent" >While newer operating systems can be downloaded over the internet, older operating systems did not have
installation media for every minor release. For compatible distributions of such, download a device-specific image
and modify it if necessary. Visit this archived Apple Support <a 
href="https://web.archive.org/web/20170705003629/https://support.apple.com/en-us/HT204319" >article</a> for a list of the bundled device-specific
builds for legacy operating systems. However, as this may not always be accurate, the latest versions are listed
below.
<a 
 id="x1-77001r62"></a>
</p>
<h5 class="subsubsectionHead"><span class="titlemark">12.1.1   </span> <a 
 id="x1-780001"></a>macOS 10.8 and 10.9</h5>
     <ul class="itemize1">
     <li class="itemize">Disk images on these systems use <span class="uwave">the </span>Apple Partitioning Scheme and require <span class="uwave">the </span>OpenPartitionDxe driver to
     run DMG recovery and installation (included in OpenDuet). It is possible to set DmgLoading to Disabled to run
     the recovery without DMG loading avoiding the need for OpenPartitionDxe.
     </li>
     <li class="itemize">Cached  kernel  images  often  do  not  contain  family  drivers  for  networking  (IONetworkingFamily)  or  audio
     (IOAudioFamily) requiring the use of Force loading in order to inject networking or audio drivers.</li></ul>
<a 
 id="x1-78001r82"></a>
<h5 class="subsubsectionHead"><span class="titlemark">12.1.2   </span> <a 
 id="x1-790002"></a>macOS 10.7</h5>
     <ul class="itemize1">
     <li class="itemize">All previous issues apply.
     </li>
     <li class="itemize">SSSE3 support (not to be confused with SSE3 support) is a hard requirement for macOS 10.7 kernel.
     </li>
     <li class="itemize">Many kexts, including Lilu when 32-bit kernel is used and a lot of Lilu plugins, are unsupported on macOS 10.7
     and older as they require newer kernel APIs, which are not part of the macOS 10.7 SDK.
     </li>
     <li class="itemize">Prior to macOS 10.8 KASLR sliding is not supported, which will result in memory allocation failures on firmware
     that utilise lower memory for their own purposes. Refer to <a 
href="https://github.com/acidanthera/bugtracker/issues/1125" >acidanthera/bugtracker#1125</a> for tracking.</li></ul>
<a 
 id="x1-79001r83"></a>
<h5 class="subsubsectionHead"><span class="titlemark">12.1.3   </span> <a 
 id="x1-800003"></a>macOS 10.6</h5>
     <ul class="itemize1">
     <li class="itemize">All previous issues apply.
     </li>
     <li class="itemize">SSSE3 support is a requirement for macOS 10.6 kernel with 64-bit userspace enabled. This limitation can mostly
     be lifted by enabling the LegacyCommpage quirk.
     </li>
     <li class="itemize">Last  released  installer  images  for  macOS 10.6  are  macOS 10.6.7  builds  10J3250 (for  MacBookPro8,x)  and
     10J4139 (for iMac12,x), without Xcode). These images are limited to their target model identifiers and have no
     -no_compat_check boot argument support. Modified images (with ACDT suffix) without model restrictions can
     be found <a 
href="https://archive.org/details/10.6.7-10j3250-disk-images" >here</a> (<a 
href="https://mega.nz/folder/z5YUhYTb#gA_IRY5KMuYpnNCg7kR3ug" >MEGA Mirror</a>), assuming macOS 10.6 is legally owned. Read DIGEST.txt for more details. Note
     that these are the earliest tested versions of macOS 10.6 with OpenCore.</li></ul>
<!--l. 7142--><p class="noindent" >Model checking may also be erased by editing OSInstall.mpkg with e.g. Flat Package Editor by making Distribution
script to always return true in hwbeModelCheck function. Since updating the only file in the image and not corrupting other
files can be difficult and may cause slow booting due to kernel cache date changes, it is recommended to script image rebuilding
as shown below:
                                                                                                  
                                                                                                  
</p><!--l. 7293--><p class="noindent" >To enable operating system switching and install relevant drivers in the majority of cases Windows support software from <a 
href="https://support.apple.com/boot-camp" >Boot
Camp</a> is required. For simplicity of the download process or when configuring an already installed Windows version a
third-party utility, <a 
href="https://github.com/timsutton/brigadier" >Brigadier</a>, can be used successfully. Note, that <a 
href="https://www.7-zip.org" >7-Zip</a> may be downloaded and installed prior to using
Brigadier.
</p><!--l. 7301--><p class="noindent" >Remember to always use the latest version of Windows support software from Boot Camp, as versions prior to 6.1 do
not support APFS, and thus will not function correctly. To download newest software pass most recent Mac
model to Brigadier, for example ./brigadier.exe -m iMac19,1. To install Boot Camp on an unsupported Mac
model afterwards run PowerShell as Administrator and enter msiexec /i BootCamp.msi. If there is a previous
version of Boot Camp installed it should be removed first by running msiexec /x BootCamp.msi command.
BootCamp.msi file is located in BootCamp/Drivers/Apple directory and can be reached through Windows
Explorer.
</p><!--l. 7311--><p class="noindent" >While Windows support software from Boot Camp solves most of compatibility problems, the rest may still have to be
addressed manually:
</p>
     <ul class="itemize1">
     <li class="itemize">To invert mouse wheel scroll direction FlipFlopWheel must be set to 1 as explained on <a 
href="https://superuser.com/a/364353" >SuperUser</a>.
     </li>
     <li class="itemize">RealTimeIsUniversal must be set to 1 to avoid time desync between Windows and macOS as explained on
     <a 
href="https://superuser.com/q/494432" >SuperUser</a> (this is typically not required).
     </li>
     <li class="itemize">To access Apple filesystems such as HFS+ and APFS, separate software may need to be installed. Some of the
     known utilities are: <a 
href="https://forums.macrumors.com/threads/apple-hfs-windows-driver-download.1368010/" >Apple HFS+ driver</a> (<a 
href="https://forums.macrumors.com/threads/apple-hfs-windows-driver-download.1368010/post-24180079" >workaround for Windows 10</a>), <a 
href="http://www.catacombae.org/hfsexplorer" >HFSExplorer</a>, MacDrive, Paragon APFS,
     Paragon HFS+, TransMac, etc. Remember to never ever attempt to modify Apple file systems from Windows
     as this often leads to irrecoverable data loss.</li></ul>
<!--l. 7329--><p class="noindent" >Why do I see Basic data partition in <span class="uwave">the </span>Boot Camp Startup Disk control panel?
</p><!--l. 7331--><p class="noindent" ><span class="uwave">The </span>Boot Camp control panel uses <span class="uwave">the </span>GPT partition table to obtain each boot option name. After installing Windows
separately<span class="sout">the partition will have </span><span class="uwave">, the partition has </span>to be relabelled manually. This can be done with many utilities including
<span class="uwave">the </span>open-source <a 
href="https://sourceforge.net/projects/gptfdisk" >gdisk</a> utility. Reference example:
</p>
<!--l. 7336-->
<a 
 id="x1-84001r4"></a>
<a 
 id="x1-84002"></a>
<div class="lstlisting" id="listing-18"><span class="label"><a 
 id="x1-84003r1"></a></span>PS C:\gdisk&#x003E; .\gdisk64.exe \\.\physicaldrive0 <br /><span class="label"><a 
 id="x1-84004r2"></a></span>GPT fdisk (gdisk) version 1.0.4 <br /><span class="label"><a 
 id="x1-84005r3"></a></span> <br /><span class="label"><a 
 id="x1-84006r4"></a></span>Command (? for help): p <br /><span class="label"><a 
 id="x1-84007r5"></a></span>Disk \\.\physicaldrive0: 419430400 sectors, 200.0 GiB <br /><span class="label"><a 
 id="x1-84008r6"></a></span>Sector size (logical): 512 bytes <br /><span class="label"><a 
 id="x1-84009r7"></a></span>Disk identifier (GUID): DEC57EB1-B3B5-49B2-95F5-3B8C4D3E4E12 <br /><span class="label"><a 
 id="x1-84010r8"></a></span>Partition table holds up to 128 entries <br /><span class="label"><a 
 id="x1-84011r9"></a></span>Main partition table begins at sector 2 and ends at sector 33 <br /><span class="label"><a 
 id="x1-84012r10"></a></span>First usable sector is 34, last usable sector is 419430366 <br /><span class="label"><a 
 id="x1-84013r11"></a></span>Partitions will be aligned on 2048-sector boundaries <br /><span class="label"><a 
 id="x1-84014r12"></a></span>Total free space is 4029 sectors (2.0 MiB) <br /><span class="label"><a 
 id="x1-84015r13"></a></span> <br /><span class="label"><a 
 id="x1-84016r14"></a></span>Number  Start (sector)    End (sector)  Size       Code  Name <br /><span class="label"><a 
 id="x1-84017r15"></a></span>   1            2048         1023999   499.0 MiB   2700  Basic data partition <br /><span class="label"><a 
 id="x1-84018r16"></a></span>   2         1024000         1226751   99.0 MiB    EF00  EFI system partition <br /><span class="label"><a 
 id="x1-84019r17"></a></span>   3         1226752         1259519   16.0 MiB    0C01  Microsoft reserved ... <br /><span class="label"><a 
 id="x1-84020r18"></a></span>   4         1259520       419428351   199.4 GiB   0700  Basic data partition <br /><span class="label"><a 
 id="x1-84021r19"></a></span> <br /><span class="label"><a 
 id="x1-84022r20"></a></span>Command (? for help): c <br /><span class="label"><a 
 id="x1-84023r21"></a></span>Partition number (1-4): 4 <br /><span class="label"><a 
 id="x1-84024r22"></a></span>Enter name: BOOTCAMP <br /><span class="label"><a 
 id="x1-84025r23"></a></span> <br /><span class="label"><a 
 id="x1-84026r24"></a></span>Command (? for help): w <br /><span class="label"><a 
 id="x1-84027r25"></a></span> <br /><span class="label"><a 
 id="x1-84028r26"></a></span>Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING PARTITIONS!! <br /><span class="label"><a 
 id="x1-84029r27"></a></span> <br /><span class="label"><a 
 id="x1-84030r28"></a></span>Do you want to proceed? (Y/N): Y <br /><span class="label"><a 
 id="x1-84031r29"></a></span>OK; writing new GUID partition table (GPT) to \\.\physicaldrive0. <br /><span class="label"><a 
 id="x1-84032r30"></a></span>Disk synchronization succeeded! The computer should now use the new partition table. <br /><span class="label"><a 
 id="x1-84033r31"></a></span>The operation has completed successfully.
<figcaption class="caption" ><span class="id">Listing 4:</span><span  
class="content">Relabeling Windows volume</span></figcaption><!--tex4ht:label?: x1-84001r -->
</div>
<!--l. 7371--><p class="noindent" >How <span class="sout">to </span><span class="uwave">do I </span>choose Windows BOOTCAMP with custom NTFS drivers?
</p><!--l. 7373--><p class="noindent" >Third-party drivers providing NTFS support, such as <a 
href="https://www.tuxera.com/community/open-source-ntfs-3g" >NTFS-3G</a>, Paragon NTFS, Tuxera NTFS or <a 
href="https://www.seagate.com/support/software/paragon" >Seagate Paragon Driver</a>
disrupt certain macOS functionality, including <span class="uwave">the </span><a 
href="https://support.apple.com/HT202796" >Startup Disk</a> preference pane normally used for operating system selection.
While the recommended option remains not to use such drivers as they commonly corrupt the filesystem, and prefer the driver
bundled with macOS with optional write support ( <a 
href="http://osxdaily.com/2013/10/02/enable-ntfs-write-support-mac-os-x" >command</a> or <a 
href="https://mounty.app" >GUI</a>), there still exist vendor-specific workarounds for their
products: <a 
href="https://www.tuxera.com/products/tuxera-ntfs-for-mac/faq" >Tuxera</a>, <a 
href="https://kb.paragon-software.com/article/6604" >Paragon</a>, etc.
<a 
 id="x1-84034r88"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">12.4   </span> <a 
 id="x1-850004"></a>Debugging</h4>
<!--l. 7389--><p class="noindent" >Similar to other projects working with hardware OpenCore supports auditing and debugging. The use of NOOPT or DEBUG build
modes instead of RELEASE can produce a lot more debug output. With NOOPT source level debugging with GDB or IDA Pro is
also available. For GDB check <a 
href="https://github.com/acidanthera/OpenCorePkg/tree/master/Debug" >OpenCore Debug</a> page. For IDA Pro, version 7.3 or newer is needed, and <a 
href="https://www.hex-rays.com/products/ida/support/tutorials/index.shtml" >Debugging the XNU
Kernel with IDA Pro</a> may also help.
                                                                                                  
                                                                                                  
</p><!--l. 7398--><p class="noindent" >To obtain the log during boot serial port debugging can be used. Serial port debugging is enabled in Target,
e.g. 0xB for onscreen with serial. To initialise serial within OpenCore use SerialInit configuration option.
For macOS the best choice is CP2102-based UART devices. Connect motherboard TX to USB UART RX, and
motherboard GND to USB UART GND. Use screen utility to get the output, or download GUI software, such as
<a 
href="https://freeware.the-meiers.org" >CoolTerm</a>.
</p><!--l. 7406--><p class="noindent" >Note: On several motherboards (and possibly USB UART dongles) PIN naming may be incorrect. It is very common to have
GND swapped with RX, thus, motherboard “TX” must be connected to USB UART GND, and motherboard “GND” to USB UART
RX.
</p><!--l. 7411--><p class="noindent" >Remember to enable COM port in firmware settings, and never use USB cables longer than 1 meter to avoid output corruption.
To additionally enable XNU kernel serial output debug=0x8 boot argument is needed.
<a 
 id="x1-85001r90"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">12.5   </span> <a 
 id="x1-860005"></a>Tips and Tricks</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-86002x1">How <span class="sout">to </span><span class="uwave">do I </span>debug boot <span class="sout">failure</span><span class="uwave">failures</span>?
     <!--l. 7421--><p class="noindent" ><span class="sout">Normally it is enough to obtain </span><span class="uwave">Obtaining </span>the actual error message <span class="uwave">is usually adequate</span>. For this<span class="uwave">, </span>ensure that:
     </p>
         <ul class="itemize1">
         <li class="itemize">A DEBUG or NOOPT version of OpenCore is used.
         </li>
         <li class="itemize">Logging is enabled (1) and shown onscreen (2): Misc → Debug → Target = 3.
         </li>
         <li class="itemize">Logged messages from at least DEBUG_ERROR (0x80000000), DEBUG_WARN (0x00000002), and DEBUG_INFO
         (0x00000040) levels are visible onscreen: Misc → Debug → DisplayLevel = 0x80000042.
         </li>
         <li class="itemize">Critical error messages, such as DEBUG_ERROR, stop booting: Misc→Security→HaltLevel = 0x80000000.
         </li>
         <li class="itemize">Watch Dog is disabled to prevent automatic reboot: Misc → Debug → DisableWatchDog = true.
         </li>
         <li class="itemize">Boot Picker (entry selector) is enabled: Misc → Boot → ShowPicker = true.</li></ul>
     <!--l. 7443--><p class="noindent" >If there is no obvious error, check the available workarounds in the Quirks sections one by one. For early boot
     troubleshooting, for instance, when OpenCore menu does not appear, using UEFI Shell (bundled with OpenCore) may
     help to see early debug messages.
     </p></li>
     <li 
  class="enumerate" id="x1-86004x2">How <span class="sout">to </span><span class="uwave">do I </span>debug macOS boot <span class="sout">failure</span><span class="uwave">failures</span>?
         <ul class="itemize1">
         <li class="itemize">Refer to boot-args values such as debug=0x100, keepsyms=1, -v, and similar.
         </li>
         <li class="itemize">Do not forget about AppleDebug and ApplePanic properties.
         </li>
         <li class="itemize">Take care of Booter, Kernel, and UEFI quirks.
         </li>
         <li class="itemize">Consider using serial port to inspect early kernel boot failures. For this debug=0x108, serial=5, and
         msgbuf=1048576 boot arguments are needed. Refer to the patches in Sample.plist when dying before serial
         init.
         </li>
         <li class="itemize">Always read the logs carefully.</li></ul>
     </li>
     <li 
  class="enumerate" id="x1-86006x3">How <span class="sout">to </span><span class="uwave">do I </span>customise boot entries?
     <!--l. 7466--><p class="noindent" >OpenCore follows standard Apple Bless model and extracts the entry name from .contentDetails and
     .disk_label.contentDetails files in the booter directory if present. These files contain an ASCII string with an entry
     title, which may then be customised by the user.
                                                                                                  


</body>
</html>