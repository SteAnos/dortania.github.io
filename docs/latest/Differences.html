<!DOCTYPE html> 
<html lang="en-US" xml:lang="en-US" > 
<head><title>Differences</title> 
<meta  charset="utf-8" /> 
<meta name="generator" content="TeX4ht (http://www.tug.org/tex4ht/)" /> 
<meta name="viewport" content="width=device-width,initial-scale=1" /> 
<link rel="stylesheet" type="text/css" href="Differences.css" /> 
<meta name="src" content="Differences.tex" /> 
<link rel="stylesheet" type="text/css" href="../main.css" /></head><body 
><div class="center" 
>
<!--l. 142--><p class="noindent" >
</p><!--l. 149--><p class="noindent" > <img 
src="Logos/Logo-.png" alt="PIC"  
width="160" height="160"  />
</p><!--l. 153--><p class="noindent" >OpenCore
</p><!--l. 157--><p class="noindent" >Reference Manual (0.6<span class="sout">.7</span><span class="uwave">.8</span>)
</p><!--l. 161--><p class="noindent" >[2021.03.21]
</p><!--l. 169--><p class="noindent" >Copyright ©2018-2021 vit9696
</p>
</div>
                                                                                                  
                                                                                                  
<br /> <span class="subsectionToc" >12.1 <a 
href="#x1-770001" id="QQ2-1-81">Legacy Apple OS</a></span>
<br /> <span class="subsectionToc" >12.4 <a 
href="#x1-850004" id="QQ2-1-90">Debugging</a></span>
<br /> <span class="subsectionToc" >12.5 <a 
href="#x1-860005" id="QQ2-1-91">Tips and Tricks</a></span>
</div>
<a 
 id="x1-1001r1"></a>
<h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-20001"></a>Introduction</h3>
<!--l. 178--><p class="noindent" >This document provides information on the <span class="uwave">format of the </span><a 
href="https://github.com/acidanthera/OpenCorePkg" >OpenCore</a> user configuration file <span class="sout">format </span>used to set up the correct
functioning of the macOS operating system. It is to be read as the official clarification of expected OpenCore behaviour. All
deviations, if found in published OpenCore releases, shall be considered to be documentation or implementation
issues which should be reported via the <a 
href="https://github.com/acidanthera/bugtracker" >Acidanthera Bugtracker</a>. An errata sheet is available in <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Errata/Errata.pdf" >OpenCorePkg
repository</a>.
</p><!--l. 188--><p class="noindent" >This document is structured as a specification and is not meant to provide a step-by-step guide to configuring an end-user
Board Support Package (BSP). The intended audience of the document is anticipated to be programmers and engineers with a
basic understanding of macOS internals and UEFI functionality. For these reasons, this document is available
exclusively in English, and all other sources or translations of this document are unofficial and may contain
errors.
</p><!--l. 195--><p class="noindent" >Third-party articles, utilities, books, and similar, may be more useful for a wider audience as they could provide
guide-like material. However, they are subject to their authors’ preferences, <span class="sout">tastes, </span>misinterpretations of this
document, and unavoidable obsolescence. In cases of using such sources, such as <a 
href="https://dortania.github.io" >Dortania</a>’s <a 
href="https://dortania.github.io/OpenCore-Install-Guide" >OpenCore Install
Guide</a> and <a 
href="https://dortania.github.io/getting-started" >related material</a>, please refer back to this document on every decision made and re-evaluate potential
<span class="sout">consequences</span><span class="uwave">implications</span>.
</p><!--l. 203--><p class="noindent" >Please note that regardless of the sources used, users are required to fully understand every OpenCore configuration option,
and the principles behind them, before posting issues to the <a 
href="https://github.com/acidanthera/bugtracker" >Acidanthera Bugtracker</a>.
</p><!--l. 207--><p class="noindent" >Note: Creating this document would not have been possible without the invaluable contributions from other people:
Andrey1970, Goldfish64, dakanji, PMheart, and several others, with the full list available in <a 
href="https://github.com/acidanthera/OpenCorePkg/commits/master/Docs" >OpenCorePkg
history</a>.
<a 
 id="x1-2001r1"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-30001"></a>Generic Terms</h4>
     <ul class="itemize1">
     <li class="itemize">plist —  Subset  of  ASCII  Property  List  format  written  in  XML,  also  know  as  XML  plist  format  version
     1.  Uniform  Type  Identifier  (UTI):  com.apple.property-list.  Plists  consist  of  plist objects,  which  are
     combined to form a hierarchical structure. Due to plist format not being well-defined, all the definitions of this
     document may only be applied after plist is considered valid by running plutil -lint. External references:
     https://www.apple.com/DTDs/PropertyList-1.0.dtd, man plutil.
     </li>
     <li class="itemize">plist type — plist collections (plist array, plist dictionary, plist key) and primitives (plist string,
     plist data, plist date, plist boolean, plist integer, plist real).
     </li>
     <li class="itemize">plist object — definite realisation of plist type, which may be interpreted as value.
     </li>
     <li class="itemize">plist array — array-like collection, conforms to array. Consists of zero or more plist objects.
     </li>
     <li class="itemize">plist dictionary —  map-like  (associative  array)  collection,  conforms  to  dict.  Consists  of  zero  or  more
     plist keys.
     </li>
     <li class="itemize">plist key — contains one plist object going by the name of plist key, conforms to key. Consists of printable
     7-bit ASCII characters.
                                                                                                  
                                                                                                  
     <li class="itemize">fatal behaviour — behaviour leading to boot termination. Implementations shall prevent the boot process
     from continuing until the host system is restarted. It is permitted, but not required, to execute cold reboots or
     to show warning messages in such cases.
     </li>
     <li class="itemize">undefined behaviour — behaviour not prescribed by this document. Implementations may take any measures
     including, but not limited to, measures associated with fatal behaviour, assumptions of any state or value, or
     disregarding any associated states or values. This is however subject to such measures not negatively impacting
     upon system integrity.</li></ul>
<a 
 id="x1-5001r6"></a>
<h4 class="subsectionHead"><span class="titlemark">2.2   </span> <a 
 id="x1-60002"></a>Configuration Processing</h4>
<!--l. 341--><p class="noindent" >The OC config file is guaranteed to be processed at least once if found. <span class="sout">Depending on </span><span class="uwave">Subject to the </span>OpenCore bootstrapping
mechanism, the presence of multiple OC config files may lead to the reading of any of them. It is permissible for no OC Config
file to be present on disk. In such cases, if the implementation does not abort the boot process, all values shall follow the rules
of invalid values and optional values.
</p><!--l. 348--><p class="noindent" >The OC config file has restrictions on size, nesting levels, and number of keys:
</p>
     <ul class="itemize1">
     <li class="itemize">The OC config file size shall not exceed 32 MBs.
     </li>
     <li class="itemize">The OC config file shall not have more than 32 nesting levels.
     </li>
     <li class="itemize">The OC config file may have up to 32,768 XML nodes within each plist object.
         <ul class="itemize2">
         <li class="itemize">One plist dictionary item is counted as a pair of nodes</li></ul>
     </li></ul>
<!--l. 365--><p class="noindent" >Reading malformed OC config files results in undefined behaviour. Examples of malformed OC config files include the
following:
</p>
     <ul class="itemize1">
     <li class="itemize">OC config files that do not conform to DTD PLIST 1.0.
     </li>
     <li class="itemize">OC config files with unsupported or non-conformant plist objects found in this document.
     </li>
     <li class="itemize">OC config files violating restrictions on size, nesting levels, and number of keys.</li></ul>
<!--l. 380--><p class="noindent" >It is recommended, but not required, to abort loading malformed OC config files and to continue as if an OC config file is not
present. For forward compatibility, it is recommended, but not required, for the implementation to warn about the use of
invalid values.
</p><!--l. 385--><p class="noindent" >The recommended <span class="sout">practice for </span><span class="uwave">approach to </span>interpreting invalid values is to conform to the following convention where
applicable:
</p>
<div class="center" 
>
<!--l. 388--><p class="noindent" >
</p>
<div class="tabular"> <table id="TBL-1" class="tabular" 
 
><colgroup id="TBL-1-1g"><col 
id="TBL-1-1" /></colgroup><colgroup id="TBL-1-2g"><col 
id="TBL-1-2" /></colgroup><tr 
class="hline"><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-1-1"  
class="td11">Type            </td><td  style="white-space:nowrap; text-align:left;" id="TBL-1-1-2"  
class="td11">Value                                  </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-2-1"  
class="td11">plist string  </td><td  style="white-space:nowrap; text-align:left;" id="TBL-1-2-2"  
class="td11">Empty string (&#x003C;string&#x003E;&#x003C;/string&#x003E;)</td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-3-1"  
class="td11">plist data    </td><td  style="white-space:nowrap; text-align:left;" id="TBL-1-3-2"  
class="td11">Empty data (&#x003C;data&#x003E;&#x003C;/data&#x003E;)        </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-4-1"  
class="td11">plist integer </td><td  style="white-space:nowrap; text-align:left;" id="TBL-1-4-2"  
class="td11">0 (&#x003C;integer&#x003E;0&#x003C;/integer&#x003E;)           </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-5-1"  
class="td11">plist boolean </td><td  style="white-space:nowrap; text-align:left;" id="TBL-1-5-2"  
class="td11">False (&#x003C;false/&#x003E;)                         </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-6-1"  
class="td11">plist tristate</td><td  style="white-space:nowrap; text-align:left;" id="TBL-1-6-2"  
class="td11">False (&#x003C;false/&#x003E;)                         </td>
</tr><tr 
class="hline"><td><hr /></td><td><hr /></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-1-7-"><td  style="white-space:nowrap; text-align:left;" id="TBL-1-7-1"  
class="td11">              </td>
</tr></table></div></div>
<a 
 id="x1-6001r7"></a>
                                                                                                  
                                                                                                  
     </li>
     <li class="itemize">Use DEBUG_ERROR to print critical human visible messages that may potentially halt the boot process, and
     DEBUG_WARN for all other human visible errors, RELEASE builds included.</li></ul>
<!--l. 853--><p class="noindent" >The <a 
href="https://git-scm.com/docs/git-bisect" >git-bisect</a> functionality may be useful when trying to find problematic changes. Unofficial sources of per-commit
OpenCore binary builds, such as <a 
href="https://dortania.github.io/builds" >Dortania</a>, may also be useful.
<a 
 id="x1-13001r9"></a>
</p>
<h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-140004"></a>ACPI</h3>
<a 
 id="x1-14001r16"></a>
<h4 class="subsectionHead"><span class="titlemark">4.1   </span> <a 
 id="x1-150001"></a>Introduction</h4>
<!--l. 861--><p class="noindent" >ACPI (Advanced Configuration and Power Interface) is an open standard to discover and configure computer hardware. The
<a 
href="https://uefi.org/specifications" >ACPI specification</a> <span class="sout">define the </span><span class="uwave">defines </span>standard tables (e.g. DSDT, SSDT, FACS, DMAR) and various methods (e.g. _DSM, _PRW) for
implementation. Modern hardware needs <span class="sout">little </span><span class="uwave">few </span>changes to maintain ACPI compatibility <span class="sout">, yet some of those </span><span class="uwave">and some
options for such changes </span>are provided as <span class="sout">a </span>part of OpenCore.
</p><!--l. 872--><p class="noindent" >To compile and disassemble ACPI tables, the <a 
href="https://github.com/acpica/acpica" >iASL compiler</a> developed by <a 
href="https://www.acpica.org" >ACPICA</a> can be used. A GUI front-end to iASL
compiler can be downloaded from <a 
href="https://github.com/acidanthera/MaciASL/releases" >Acidanthera/MaciASL</a>.
</p><!--l. 876--><p class="noindent" >ACPI changes apply globally (to every operating system) with the following effective order:
</p>
     <ul class="itemize1">
     <li class="itemize">Patch is processed.
     </li>
     <li class="itemize">Delete is processed.
     </li>
     <li class="itemize">Add is processed.
     </li>
     <li class="itemize">Quirks are processed.</li></ul>
<!--l. 886--><p class="noindent" >Applying the changes globally resolves the problems of incorrect operating system detection (consistent with the ACPI
specification, not possible before the operating system boots), operating system chainloading, and difficult ACPI debugging.
Hence, more attention may be required when writing changes to _OSI.
</p><!--l. 891--><p class="noindent" >Applying the patches early makes it possible to write so called “proxy” patches, where the original method is patched in the
original table and is implemented in the patched table.
</p><!--l. 895--><p class="noindent" >There are several sources of ACPI tables and workarounds. Commonly used ACPI tables are provided with OpenCore,
VirtualSMC, VoodooPS2, and WhateverGreen releases. Besides those, several third-party instructions may be found on the
AppleLife <a 
href="https://applelife.ru/forums/xakintosh.67" >Laboratory</a> and <a 
href="https://applelife.ru/forums/dsdt.129" >DSDT</a> subforums (e.g. <a 
href="https://applelife.ru/posts/498967" >Battery register splitting</a> guide). A slightly more user-friendly explanation of
some tables included with OpenCore can also be found in <a 
href="https://dortania.github.io" >Dortania</a>’s <a 
href="https://dortania.github.io/Getting-Started-With-ACPI" >Getting started with ACPI</a> guide. For more exotic cases,
there are several alternatives such as <a 
href="https://github.com/daliansky" >daliansky</a>’s <a 
href="https://github.com/daliansky/OC-little" >ACPI sample collection</a>. Note however that the quality of the suggested
solutions will be variable.
<a 
 id="x1-15001r18"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">4.2   </span> <a 
 id="x1-160002"></a>Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-16002x1">Add<br 
class="newline" />Type: plist array<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Load selected tables from the OC/ACPI directory.
     <!--l. 919--><p class="noindent" >Designed to be filled with plist dict values, describing each add entry. See the ?? section below.
     </p></li>
     <li 
  class="enumerate" id="x1-16004x2">Delete<br 
class="newline" />Type: plist array<br 
class="newline" />Failsafe: Empty                                          <br 
class="newline" /> ype: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Reuse original hibernate memory map.
     <!--l. 1575--><p class="noindent" >This option forces the XNU kernel to ignore a newly supplied memory map and assume that it did not change after
     waking from hibernation. This behaviour is required by Windows to work. Windows mandates <a 
href="https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/oem-uefi#hibernation-state-s4-transition-requirements" >preserving</a> runtime
     memory size and location after S4 wake.
     </p><!--l. 1581--><p class="noindent" >Note: This may be used to workaround defective memory map implementations on older, rare legacy hardware. Examples
     of such hardware are Ivy Bridge laptops with Insyde firmware such as the Acer V3-571G. Do not use this option without
     a full understanding of the implications.
     </p></li>
     <li 
  class="enumerate" id="x1-26014x7">EnableSafeModeSlide<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Patch bootloader to have KASLR enabled in safe mode.
     <!--l. 1591--><p class="noindent" >This option is relevant to users with issues booting to safe mode (e.g. by holding shift or with using the -x boot
     argument). By default, safe mode forces 0 slide as if the system was launched with the slide=0 boot
     argument.
</p>
         <ul class="itemize1">
         <li class="itemize">This quirk attempts to patch the boot.efi file to remove this limitation and to allow using other values
         (from 1 to 255 inclusive).
         </li>
         <li class="itemize">This quirk requires enabling ProvideCustomSlide.</li></ul>
     <!--l. 1603--><p class="noindent" >Note: The need for this option is dependent on the availability of safe mode. It can be enabled when booting to safe mode
     fails.
     </p></li>
     <li 
  class="enumerate" id="x1-26016x8">EnableWriteUnprotector<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Permit write access to UEFI runtime services code.
     <!--l. 1612--><p class="noindent" >This option bypasses R<span class='accenthat'>X</span> permissions in code pages of UEFI runtime services by removing write protection (WP) bit from
     CR0 register during their execution. This quirk requires OC_FIRMWARE_RUNTIME protocol implemented in
     OpenRuntime.efi.
     </p><!--l. 1617--><p class="noindent" >Note: This quirk may potentially weaken firmware security. Please use RebuildAppleMemoryMap if the firmware supports
     memory attributes table (MAT). Refer to the OCABC: MAT support is 1/0 log entry to determine whether MAT is
     supported.
     </p></li>
     <li 
  class="enumerate" id="x1-26018x9"><span class="uwave">ForceBooterSignature</span><br 
class="newline" /><span class="uwave">Type</span><span class="uwave">: </span><span class="uwave">plist boolean</span><br 
class="newline" /><span class="uwave">Failsafe</span><span class="uwave">: </span><span class="uwave">false</span><br 
class="newline" /><span class="uwave">Description</span><span class="uwave">: Set macOS </span><span class="uwave">boot-signature</span> <span class="uwave">to OpenCore launcher. </span>
     <!--l. 1632--><p class="noindent" ><span class="uwave">Booter signature, essentially a SHA-1 hash of the loaded image, is used by Mac EFI to verify the authenticity of the
     bootloader when waking from hibernation. This option forces macOS to use OpenCore launcher SHA-1 hash as a booter
     signature to let OpenCore shim hibernation wake on Mac EFI firmware. </span>
     </p><!--l. 1634--><p class="noindent" ><span class="uwave">Note</span><span class="uwave">: OpenCore launcher path is determined from </span><span class="uwave">LauncherPath</span> <span class="uwave">property. </span>
     </p></li>
     <li 
  class="enumerate" id="x1-26020x10">ForceExitBootServices<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Retry ExitBootServices with new memory map on failure.
                                                                                                  
                                                                                                  
     </p></li>
     <li 
  class="enumerate" id="x1-26036x18">SignalAppleOS<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Report macOS being loaded through OS Info for any OS.
     <!--l. 1791--><p class="noindent" >This quirk is useful on Mac firmware, which loads different operating systems with different hardware configurations.
     For example, it is supposed to enable Intel GPU in Windows and Linux in some dual-GPU MacBook
     models.
     </p></li>
     <li 
  class="enumerate" id="x1-26038x19">SyncRuntimePermissions<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Update memory permissions for the runtime environment.
     <!--l. 1801--><p class="noindent" >Some types of firmware fail to properly handle runtime permissions: </p>
         <ul class="itemize1">
         <li class="itemize">They incorrectly mark OpenRuntime as not executable in the memory map.
         </li>
         <li class="itemize">They incorrectly mark OpenRuntime as not executable in the memory attributes table.
         </li>
         <li class="itemize">They lose entries from the memory attributes table after OpenRuntime is loaded.
         </li>
         <li class="itemize">They mark items in the memory attributes table as read-write-execute.</li></ul>
     <!--l. 1812--><p class="noindent" >This quirk <span class="sout">tries to update </span><span class="uwave">attempts to update the </span>memory map and memory attributes table to correct
     this.
     </p><!--l. 1814--><p class="noindent" >Note: The need for this quirk is indicated by early boot failures. Only firmware released after 2017 is typically
     affected.
</p>
     </li></ol>
<a 
 id="x1-26039r24"></a>
<h3 class="sectionHead"><span class="titlemark">6   </span> <a 
 id="x1-270006"></a>DeviceProperties</h3>
<a 
 id="x1-27001r29"></a>
<h4 class="subsectionHead"><span class="titlemark">6.1   </span> <a 
 id="x1-280001"></a>Introduction</h4>
<!--l. 1823--><p class="noindent" >Device configuration is provided to macOS with a dedicated buffer, called EfiDevicePathPropertyDatabase. This buffer is a
serialised map of DevicePaths to a map of property names and their values.
</p><!--l. 1827--><p class="noindent" >Property data can be debugged with <a 
href="https://github.com/acidanthera/gfxutil" >gfxutil</a>. To obtain current property data, use the following command in macOS:
</p><!--l. 1830-->
<div class="lstlisting" id="listing-4"><span class="label"><a 
 id="x1-28001r1"></a></span>ioreg -lw0 -p IODeviceTree -n efi -r -x | grep device-properties | <br /><span class="label"><a 
 id="x1-28002r2"></a></span>  sed &#x0027;s/.*&#x003C;//;s/&#x003E;.*//&#x0027; &#x003E; /tmp/device-properties.hex &#x0026;&#x0026; <br /><span class="label"><a 
 id="x1-28003r3"></a></span>  gfxutil /tmp/device-properties.hex /tmp/device-properties.plist &#x0026;&#x0026; <br /><span class="label"><a 
 id="x1-28004r4"></a></span>  cat /tmp/device-properties.plist
</div>
<!--l. 1837--><p class="noindent" >Device properties are part of the IODeviceTree (gIODT) plane of the macOS I/O Registry. This plane has several construction
stages relevant for the platform initialisation. While the early construction stage is performed by the XNU kernel in the
IODeviceTreeAlloc method, the majority of the construction is performed by the platform expert, implemented in
AppleACPIPlatformExpert.kext.
</p><!--l. 1844--><p class="noindent" >AppleACPIPlatformExpert incorporates two stages of IODeviceTree construction implemented by calling <br 
class="newline" />AppleACPIPlatformExpert::mergeDeviceProperties:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-28006x1">During ACPI table initialisation through the recursive ACPI namespace scanning by the calls to <br 
class="newline" />AppleACPIPlatformExpert::createDTNubs.
                                                                                                  
                                                                                                  
<h4 class="subsectionHead"><span class="titlemark">7.1   </span> <a 
 id="x1-320001"></a>Introduction</h4>
<!--l. 1932--><p class="noindent" >This section allows the application of different kinds of kernelspace modifications on Apple Kernel (<a 
href="https://opensource.apple.com/source/xnu" >XNU</a>). The modifications
currently provide driver (kext) injection, kernel and driver patching, and driver blocking.
<a 
 id="x1-32001r35"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">7.2   </span> <a 
 id="x1-330002"></a>Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-33002x1">Add<br 
class="newline" />Type: plist array<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Load selected kernel drivers from OC/Kexts directory.
     <!--l. 1946--><p class="noindent" >Designed to be filled with plist dict values, describing each driver. See the ?? section below. Kernel driver
     load order follows the item order in the array, thus the dependencies should be written prior to their consumers.
     </p><!--l. 1951--><p class="noindent" >To track the dependency order, inspect the OSBundleLibraries key in the Info.plist of the kext. Any kext
     mentioned in the OSBundleLibraries of the other kext must precede this kext.
     </p><!--l. 1955--><p class="noindent" >Note: Kexts may have inner kexts (Plug-Ins) in their bundle. Each inner kext must be added separately.
     </p></li>
     <li 
  class="enumerate" id="x1-33004x2">Block<br 
class="newline" />Type: plist array<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Remove selected kernel drivers from prelinked kernel.
     <!--l. 1964--><p class="noindent" >Designed to be filled with plist dictionary values, describing each blocked driver. See the ?? section below.
     </p></li>
     <li 
  class="enumerate" id="x1-33006x3">Emulate<br 
class="newline" />Type: plist dict<br 
class="newline" />Description: Emulate certain hardware in kernelspace via parameters described in the ?? section below.
     </li>
     <li 
  class="enumerate" id="x1-33008x4">Force<br 
class="newline" />Type: plist array<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Load kernel drivers from system volume if they are not cached.
     <!--l. 1979--><p class="noindent" >Designed to be filled with plist dict values, describing each driver. See the ?? section below. This section
     resolves the problem of injecting drivers that depend on other drivers, which are not cached otherwise. The issue
     <span class="sout">normally </span><span class="uwave">typically </span>affects older operating systems, where various dependency kexts, such as IOAudioFamily or
     IONetworkingFamily may not be present in the kernel cache by default. The kernel driver load order follows the
     item order in the array, thus the dependencies should be written prior to their consumers. Force happens before
     Add.
     </p><!--l. 1989--><p class="noindent" >Note: The signature of the “forced” kernel drivers is not checked anyhow, making the use of this feature extremely
     dangerous and undesired for secure boot. This feature may not work on encrypted partitions in newer operating
     systems.
     </p></li>
     <li 
  class="enumerate" id="x1-33010x5">Patch<br 
class="newline" />Type: plist array<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Perform binary patches in kernel and drivers prior to driver addition and removal.
     <!--l. 2000--><p class="noindent" >Designed to be filled with plist dictionary values, describing each patch. See the ?? section below.
     </p></li>
     <li 
  class="enumerate" id="x1-33012x6">Quirks<br 
class="newline" />Type: plist dict<br 
class="newline" />Description: Apply individual kernel and driver quirks described in the ?? section below.
                                                                                                  
                                                                                                  
         </li>
         <li class="itemize">Enabling support for a CPU model not yet supported by a specific version of macOS (typically old versions).
         </li>
         <li class="itemize">Enabling XCPM support for an unsupported CPU variant.</li></ul>
     <!--l. 2182--><p class="noindent" >Note 1: It may also be the case that the CPU model is supported but there is no power management supported (e.g.
     virtual machines). In this case, MinKernel and MaxKernel can be set to restrict CPU virtualisation and dummy power
     management patches to the particular macOS kernel version.
     </p><!--l. 2186--><p class="noindent" >Note 2: <span class="sout">Normally it is only </span><span class="uwave">Only </span>the value of EAX<span class="sout">that needs to be taken care of, since it </span><span class="uwave">, which </span>represents the full
     CPUID<span class="sout">. The remaining bytes are to </span><span class="uwave">, typically needs to be accounted for and remaining bytes should </span>be left as zeroes.
     <span class="sout">Byte </span><span class="uwave">The byte </span>order is Little Endian<span class="sout">, so for </span><span class="uwave">. For </span>example, C3 06 03 00 stands for CPUID 0x0306C3
     (Haswell).
     </p><!--l. 2191--><p class="noindent" >Note 3: For XCPM support it is recommended to use the following combinations.
</p>
         <ul class="itemize1">
         <li class="itemize">Haswell-E (0x0306F2) to Haswell (0x0306C3):<br 
class="newline" />Cpuid1Data: C3 06 03 00 00 00 00 00 00 00 00 00 00 00 00 00<br 
class="newline" />Cpuid1Mask: FF FF FF FF 00 00 00 00 00 00 00 00 00 00 00 00
         </li>
         <li class="itemize">Broadwell-E (0x0406F1) to Broadwell (0x0306D4):<br 
class="newline" />Cpuid1Data: D4 06 03 00 00 00 00 00 00 00 00 00 00 00 00 00<br 
class="newline" />Cpuid1Mask: FF FF FF FF 00 00 00 00 00 00 00 00 00 00 00 00</li></ul>
     <!--l. 2203--><p class="noindent" >Note 4: Be aware that the following configurations are unsupported by XCPM (at least out of the box):
</p>
         <ul class="itemize1">
         <li class="itemize">Consumer Ivy Bridge (0x0306A9) as Apple disabled XCPM for Ivy Bridge and recommends legacy power
         management for these CPUs. _xcpm_bootstrap should manually be patched to enforce XCPM on these
         CPUs instead of this option.
         </li>
         <li class="itemize">Low-end CPUs (e.g. Haswell+ Pentium) as they are not supported properly by macOS. Legacy workarounds
         for older models can be found in the Special NOTES section of <a 
href="https://github.com/acidanthera/bugtracker/issues/365" >acidanthera/bugtracker#365</a>.</li></ul>
     </li>
     <li 
  class="enumerate" id="x1-36004x2">Cpuid1Mask<br 
class="newline" />Type: plist data, 16 bytes<br 
class="newline" />Failsafe: All zero<br 
class="newline" />Description: Bit mask of active bits in Cpuid1Data.
     <!--l. 2221--><p class="noindent" >When each Cpuid1Mask bit is set to 0, the original CPU bit is used, otherwise set bits take the value of
     Cpuid1Data.
     </p></li>
     <li 
  class="enumerate" id="x1-36006x3">DummyPowerManagement<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Requirement: 10.4<br 
class="newline" />Description: Disables AppleIntelCpuPowerManagement.
     <!--l. 2231--><p class="noindent" >Note 1: This option is a preferred alternative to NullCpuPowerManagement.kext for CPUs without native power
     management driver in macOS.
     </p><!--l. 2235--><p class="noindent" >Note 2: While this option is typically needed to disable AppleIntelCpuPowerManagement on unsupported platforms, it
     can also be used to disable this kext in other situations (e.g. with Cpuid1Data left blank).
     </p></li>
     <li 
  class="enumerate" id="x1-36008x4">MaxKernel<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty                                                                     <br 
class="newline" /> MBIOS: APPLE_SMBIOS_TABLE_TYPE134 - Version<br 
class="newline" />Description: ASCII string containing SMC version in upper case. Missing on T2 based Macs.
     </li>
     <li 
  class="enumerate" id="x1-61050x25">FirmwareFeatures<br 
class="newline" />Type: plist data, 8 bytes<br 
class="newline" />Failsafe: 0 (OEM specified on Apple hardware, 0 otherwise)<br 
class="newline" />SMBIOS: APPLE_SMBIOS_TABLE_TYPE128 - FirmwareFeatures and ExtendedFirmwareFeatures<br 
class="newline" />Description: 64-bit firmware features bitmask. Refer to <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Apple/IndustryStandard/AppleFeatures.h" >AppleFeatures.h</a> for more details. Lower 32 bits match
     FirmwareFeatures. Upper 64 bits match ExtendedFirmwareFeatures.
     </li>
     <li 
  class="enumerate" id="x1-61052x26">FirmwareFeaturesMask<br 
class="newline" />Type: plist data, 8 bytes<br 
class="newline" />Failsafe: 0 (OEM specified on Apple hardware, 0 otherwise)<br 
class="newline" />SMBIOS: APPLE_SMBIOS_TABLE_TYPE128 - FirmwareFeaturesMask and ExtendedFirmwareFeaturesMask<br 
class="newline" />Description: Supported bits of extended firmware features bitmask. Refer to <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Apple/IndustryStandard/AppleFeatures.h" >AppleFeatures.h</a> for more details. Lower 32
     bits match FirmwareFeaturesMask. Upper 64 bits match ExtendedFirmwareFeaturesMask.
     </li>
     <li 
  class="enumerate" id="x1-61054x27">ProcessorType<br 
class="newline" />Type: plist integer, 16-bit<br 
class="newline" />Failsafe: 0 (Automatic)<br 
class="newline" />SMBIOS: APPLE_SMBIOS_TABLE_TYPE131 - ProcessorType<br 
class="newline" />Description: Combined of Processor Major and Minor types.
     <!--l. 5724--><p class="noindent" >Automatic value generation <span class="sout">tries to provide </span><span class="uwave">attempts to provide the </span>most accurate value for the currently installed CPU.
     When this fails<span class="sout">please make sure to create </span><span class="uwave">, please raise </span>an <a 
href="https://github.com/acidanthera/bugtracker/issues" >issue</a> and provide sysctl machdep.cpu and <a 
href="https://github.com/acidanthera/dmidecode" >dmidecode</a>
     output. For a full list of available values and their limitations (the value will only apply if the CPU core count
     matches)<span class="sout">refer to </span><span class="uwave">, refer to the </span>Apple SMBIOS definitions header <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Apple/IndustryStandard/AppleSmBios.h" >here</a>.</p></li></ol>
<a 
 id="x1-61055r57"></a>
<h3 class="sectionHead"><span class="titlemark">11   </span> <a 
 id="x1-6200011"></a>UEFI</h3>
<a 
 id="x1-62001r64"></a>
<h4 class="subsectionHead"><span class="titlemark">11.1   </span> <a 
 id="x1-630001"></a>Introduction</h4>
<!--l. 5739--><p class="noindent" ><a 
href="https://uefi.org/specifications" >UEFI</a> (Unified Extensible Firmware Interface) is a specification that defines a software interface between an operating system
and platform firmware. This section allows <span class="sout">to load </span><span class="uwave">loading </span>additional UEFI modules <span class="sout">and/or apply tweaks for </span><span class="uwave">as well as
applying tweaks to </span>the onboard firmware. To inspect firmware contents, apply modifications and perform upgrades <a 
href="https://github.com/LongSoft/UEFITool/releases" >UEFITool</a>
and supplementary utilities can be used.
<a 
 id="x1-63001r66"></a>
</p>
<h4 class="subsectionHead"><span class="titlemark">11.2   </span> <a 
 id="x1-640002"></a>Drivers</h4>
<!--l. 5749--><p class="noindent" >Depending on the firmware<span class="uwave">, </span>a different set of drivers may be required. Loading an incompatible driver may lead the
system to unbootable state or even cause permanent firmware damage. Some of the known drivers are listed
below:
</p>
                                                                                                  
                                                                                                  
<div class="tabular"> <table id="TBL-4" class="tabular" 
 
><colgroup id="TBL-4-1g"><col 
id="TBL-4-1" /><col 
id="TBL-4-2" /></colgroup><tr  
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="white-space:normal; text-align:left;" id="TBL-4-1-1"  
class="td11"><!--l. 5754--><p class="noindent" ><a 
href="https://github.com/acidanthera/OpenCorePkg" >AudioDxe</a>*            </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-1-2"  
class="td11"><!--l. 5755--><p class="noindent" >HDA  audio  support  driver  in  UEFI  firmware  for  most  Intel  and  some  other  analog
audio controllers. Staging driver, refer to <a 
href="https://github.com/acidanthera/bugtracker/issues/740" >acidanthera/bugtracker#740</a> for known issues in
AudioDxe.                                                                                                          </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-2-"><td  style="white-space:normal; text-align:left;" id="TBL-4-2-1"  
class="td11"><!--l. 5758--><p class="noindent" ><a 
href="https://github.com/acidanthera/OpenCorePkg" >CrScreenshotDxe</a>*   </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-2-2"  
class="td11"><!--l. 5759--><p class="noindent" >Screenshot  making  driver  saving  images  to  the  root  of  OpenCore  partition  (ESP)  or
any  available  writeable  filesystem  upon  pressing  F10.  This  is  a  modified  version  of
<a 
href="https://github.com/LongSoft/CrScreenshotDxe" >CrScreenshotDxe</a> driver by <a 
href="https://github.com/NikolajSchlej" >Nikolaj Schlej</a>.                                                                </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-3-"><td  style="white-space:normal; text-align:left;" id="TBL-4-3-1"  
class="td11"><!--l. 5763--><p class="noindent" ><a 
href="https://github.com/acidanthera/OcBinaryData" >ExFatDxe</a>           </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-3-2"  
class="td11"><!--l. 5764--><p class="noindent" >Proprietary  ExFAT  file  system  driver  for  Bootcamp  support  commonly  found  in  Apple
firmware. For Sandy Bridge and earlier CPUs, the ExFatDxeLegacy driver should be used
due to the lack of RDRAND instruction support.                                                           </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-4-"><td  style="white-space:normal; text-align:left;" id="TBL-4-4-1"  
class="td11"><!--l. 5767--><p class="noindent" ><a 
href="https://github.com/acidanthera/OcBinaryData" >HfsPlus</a>            </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-4-2"  
class="td11"><!--l. 5768--><p class="noindent" >Recommended. Proprietary HFS file system driver with bless support commonly found in
Apple firmware. For Sandy Bridge and earlier CPUs, the HfsPlusLegacy driver should be
used due to the lack of RDRAND instruction support.                                                     </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-5-"><td  style="white-space:normal; text-align:left;" id="TBL-4-5-1"  
class="td11"><!--l. 5771--><p class="noindent" ><a 
href="https://github.com/acidanthera/audk" >HiiDatabase</a>*         </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-5-2"  
class="td11"><!--l. 5772--><p class="noindent" >HII services support driver from MdeModulePkg. This driver is included in most types of
firmware starting with the Ivy Bridge generation. Some applications with GUI, such as UEFI
Shell, may need this driver to work properly.                                                              </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-6-"><td  style="white-space:normal; text-align:left;" id="TBL-4-6-1"  
class="td11"><!--l. 5775--><p class="noindent" ><a 
href="https://github.com/acidanthera/audk" >EnhancedFatDxe</a>     </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-6-2"  
class="td11"><!--l. 5776--><p class="noindent" >FAT  filesystem  driver  from  FatPkg.  This  driver  is  embedded  in  all  UEFI  firmware  and
cannot  be  used  from  OpenCore.  Several  types  of  firmware  have  defective  FAT  support
implementation that may lead to corrupted filesystems on write attempts. Embedding this
driver within the firmware may be required in case writing to the EFI partition is needed
during the boot process.                                                                                        </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-7-"><td  style="white-space:normal; text-align:left;" id="TBL-4-7-1"  
class="td11"><!--l. 5781--><p class="noindent" ><a 
href="https://github.com/acidanthera/audk" >NvmExpressDxe</a>*      </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-7-2"  
class="td11"><!--l. 5782--><p class="noindent" >NVMe support driver from MdeModulePkg. This driver is included in most firmware starting
with the Broadwell generation. For Haswell and earlier, embedding it within the firmware
may be more favourable in case a NVMe SSD drive is installed.                                     </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-8-"><td  style="white-space:normal; text-align:left;" id="TBL-4-8-1"  
class="td11"><!--l. 5785--><p class="noindent" ><a 
href="https://github.com/acidanthera/OpenCorePkg" >OpenCanopy</a>*          </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-8-2"  
class="td11"><!--l. 5786--><p class="noindent" >?? implementing graphical interface.                                                                        </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-9-"><td  style="white-space:normal; text-align:left;" id="TBL-4-9-1"  
class="td11"><!--l. 5787--><p class="noindent" ><a 
href="https://github.com/acidanthera/OpenCorePkg" >OpenRuntime</a>*         </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-9-2"  
class="td11"><!--l. 5788--><p class="noindent" >?? implementing OC_FIRMWARE_RUNTIME protocol.                                                       </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-10-"><td  style="white-space:normal; text-align:left;" id="TBL-4-10-1"  
class="td11"><!--l. 5789--><p class="noindent" ><a 
href="https://github.com/acidanthera/OpenCorePkg" >OpenUsbKbDxe</a>*       </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-10-2"  
class="td11"><!--l. 5790--><p class="noindent" >USB keyboard driver adding support for AppleKeyMapAggregator protocols on top of a
custom USB keyboard driver implementation. This is an alternative to builtin KeySupport,
which may work better or worse depending on the firmware.                                         </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-11-"><td  style="white-space:normal; text-align:left;" id="TBL-4-11-1"  
class="td11"><!--l. 5793--><p class="noindent" ><a 
href="https://github.com/acidanthera/OcBinaryData" >OpenPartitionDxe</a>*  </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-11-2"  
class="td11"><!--l. 5794--><p class="noindent" >Partition management driver with Apple Partitioning Scheme support. This driver can be
used to support loading older DMG recoveries such as macOS 10.9 using Apple Partitioning
Scheme. OpenDuet already includes this driver.                                                          </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-12-"><td  style="white-space:normal; text-align:left;" id="TBL-4-12-1"  
class="td11"><!--l. 5797--><p class="noindent" ><a 
href="https://github.com/acidanthera/audk" >Ps2KeyboardDxe</a>*     </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-12-2"  
class="td11"><!--l. 5798--><p class="noindent" >PS/2 keyboard driver from MdeModulePkg. OpenDuetPkg and some types of firmware may not
include this driver, but it is necessary for PS/2 keyboard to work. Note, unlike OpenUsbKbDxe
this driver has no AppleKeyMapAggregator support and thus requires KeySupport to be
enabled.                                                                                                             </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-13-"><td  style="white-space:normal; text-align:left;" id="TBL-4-13-1"  
class="td11"><!--l. 5802--><p class="noindent" ><a 
href="https://github.com/acidanthera/audk" >Ps2MouseDxe</a>*         </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-13-2"  
class="td11"><!--l. 5803--><p class="noindent" >PS/2 mouse driver from MdeModulePkg. Some very old laptop firmware may not include this
driver but it is necessary for the touchpad to work in UEFI graphical interfaces such as
OpenCanopy.                                                                                                        </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-14-"><td  style="white-space:normal; text-align:left;" id="TBL-4-14-1"  
class="td11"><!--l. 5806--><p class="noindent" ><a 
href="https://github.com/acidanthera/OpenCorePkg" >OpenHfsPlus</a>*         </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-14-2"  
class="td11"><!--l. 5807--><p class="noindent" >HFS file system driver with bless support. This driver is an alternative to a closed source
HfsPlus driver  commonly  found  in  Apple  firmware.  While  it  is  feature  complete,  it  is
approximately 3 times slower and is yet to undergo a security audit.                              </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-15-"><td  style="white-space:normal; text-align:left;" id="TBL-4-15-1"  
class="td11"><!--l. 5811--><p class="noindent" ><a 
href="https://github.com/acidanthera/audk" >UsbMouseDxe</a>*         </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-15-2"  
class="td11"><!--l. 5812--><p class="noindent" >USB mouse driver from MdeModulePkg. Some virtual machine firmware such as OVMF may
not include this driver but it is necessary for the mouse to work in UEFI graphical interfaces
such as OpenCanopy.                                                                                             </p></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-16-"><td  style="white-space:normal; text-align:left;" id="TBL-4-16-1"  
class="td11"><!--l. 5815--><p class="noindent" ><a 
href="https://github.com/acidanthera/audk" >XhciDxe</a>*              </p></td><td  style="white-space:normal; text-align:left;" id="TBL-4-16-2"  
class="td11"><!--l. 5816--><p class="noindent" >XHCI USB controller support driver from MdeModulePkg. This driver is included in most
types of firmware starting with the Sandy Bridge generation. For earlier firmware or legacy
systems, it may be used to support external USB 3.0 PCI cards.                                    </p></td>
</tr></table></div>
<!--l. 5821--><p class="noindent" >Driver marked with * are bundled with OpenCore. To compile the drivers from UDK (EDK II) the same command used for
OpenCore compilation can be taken, but choose a corresponding package: </p><!--l. 5824-->
<div class="lstlisting" id="listing-15"><span class="label"><a 
 id="x1-64001r1"></a></span>git clone https://github.com/acidanthera/audk UDK <br /><span class="label"><a 
 id="x1-64002r2"></a></span>cd UDK <br /><span class="label"><a 
 id="x1-64003r3"></a></span>source edksetup.sh <br /><span class="label"><a 
 id="x1-64004r4"></a></span>make -C BaseTools <br /><span class="label"><a 
 id="x1-64005r5"></a></span>build -a X64 -b RELEASE -t XCODE5 -p FatPkg/FatPkg.dsc <br /><span class="label"><a 
 id="x1-64006r6"></a></span>build -a X64 -b RELEASE -t XCODE5 -p MdeModulePkg/MdeModulePkg.dsc
</div>
<a 
 id="x1-64007r67"></a>
<h4 class="subsectionHead"><span class="titlemark">11.3   </span> <a 
 id="x1-650003"></a>Tools and Applications</h4>
<!--l. 5835--><p class="noindent" >Standalone tools may help to debug firmware and hardware. Some of the known tools are listed below. While some tools can be
launched from within OpenCore <span class="sout">, see more details in </span><span class="uwave">(Refer to </span>the ?? subsection <span class="sout">of the configuration</span><span class="uwave">for more details)</span>, most
should be run separately either directly or from Shell.
                                                                                                  
                                                                                                  
     OpenCore the value of prev-lang:kbd variable is used. When native audio localisation of a particular file is
     missing, English language (en) localisation is used. Sample audio files can be found in <a 
href="https://github.com/acidanthera/OcBinaryData" >OcBinaryData
     repository</a>.
     </p></li>
     <li 
  class="enumerate" id="x1-68006x3">ConnectDrivers<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Perform UEFI controller connection after driver loading.
     <!--l. 6046--><p class="noindent" >This option is useful for loading drivers following UEFI driver model as they may not start by themselves. Examples of
     such drivers are filesystem or audio drivers. While effective, this option may not be necessary for drivers performing
     automatic connection, and may slightly slowdown the boot.
     </p><!--l. 6051--><p class="noindent" >Note: Some types of firmware, particularly those made by Apple, only connect the boot drive to speed
     up the boot process. Enable this option to be able to see all the boot options when running multiple
     drives.
     </p></li>
     <li 
  class="enumerate" id="x1-68008x4">Drivers<br 
class="newline" />Type: plist array<br 
class="newline" />Failsafe: None<br 
class="newline" />Description: Load selected drivers from OC/Drivers directory.
     <!--l. 6062--><p class="noindent" >Designed to be filled with string filenames meant to be loaded as UEFI drivers.
     </p></li>
     <li 
  class="enumerate" id="x1-68010x5">Input<br 
class="newline" />Type: plist dict<br 
class="newline" />Failsafe: None<br 
class="newline" />Description: Apply individual settings designed for input (keyboard and mouse) in the <a 
href="#x1-710009">Input Properties</a> section
     below.
     </li>
     <li 
  class="enumerate" id="x1-68012x6">Output<br 
class="newline" />Type: plist dict<br 
class="newline" />Failsafe: None<br 
class="newline" />Description: Apply individual settings designed for output (text and graphics) in the <a 
href="#x1-7200010">Output Properties</a> section
     below.
     </li>
     <li 
  class="enumerate" id="x1-68014x7">ProtocolOverrides<br 
class="newline" />Type: plist dict<br 
class="newline" />Failsafe: None<br 
class="newline" />Description: Force builtin versions of certain protocols described in the <a 
href="#x1-7300011">ProtocolOverrides Properties</a> section
     below.
     <!--l. 6086--><p class="noindent" >Note: all protocol instances are installed prior to driver loading.
     </p></li>
     <li 
  class="enumerate" id="x1-68016x8">Quirks<br 
class="newline" />Type: plist dict<br 
class="newline" />Failsafe: None<br 
class="newline" />Description: Apply individual firmware quirks described in the ?? section below.
     </li>
     <li 
  class="enumerate" id="x1-68018x9">ReservedMemory<br 
class="newline" />Type: plist array<br 
class="newline" />Description: Designed to be filled with plist dict values, describing memory areas <span class="sout">exquisite to particular </span><span class="uwave">exclusive to
     specific </span>firmware and hardware functioning, which should not be used by the operating system. <span class="sout">An example </span><span class="uwave">Examples </span>of
     such memory <span class="sout">region could be </span><span class="uwave">regions could be the </span>second 256 MB corrupted by <span class="uwave">the </span>Intel HD 3000 or an area with faulty
     RAM. See the ?? section below.
                                                                                                  
                                                                                                  
     </li></ol>
<a 
 id="x1-68019r72"></a>
<h4 class="subsectionHead"><span class="titlemark">11.7   </span> <a 
 id="x1-690007"></a>APFS Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-69002x1">EnableJumpstart<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Load embedded APFS drivers from APFS containers.
     <!--l. 6117--><p class="noindent" ><span class="uwave">An </span>APFS EFI driver is bundled in all bootable APFS containers. This option performs <span class="uwave">the </span>loading of signed APFS
     drivers <span class="sout">with respect to </span><span class="uwave">(consistent with the </span>ScanPolicy<span class="sout">. See more details in </span><span class="uwave">). Refer to the </span>“EFI Jumpstart”
     section of <span class="uwave">the </span><a 
href="https://developer.apple.com/support/apple-file-system/Apple-File-System-Reference.pdf" >Apple File System Reference</a> <span class="uwave">for more details</span>.
     </p></li>
     <li 
  class="enumerate" id="x1-69004x2">GlobalConnect<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Perform full device connection during APFS loading.
     <!--l. 6130--><p class="noindent" ><span class="sout">Instead of </span><span class="uwave">Every handle is connected recursively instead of the </span>partition handle connection <span class="sout">normally </span><span class="uwave">typically
     </span>used for APFS driver loading<span class="sout">every handle is connected recursively</span>. This may <span class="sout">take more time than usual but can
     </span><span class="uwave">result in additional time being taken but can sometimes </span>be the only way to access APFS partitions on <span class="sout">some
     types of firmware</span><span class="uwave">certain firmware, </span>such as those on older HP laptops.
     </p></li>
     <li 
  class="enumerate" id="x1-69006x3">HideVerbose<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Hide verbose output from APFS driver.
     <!--l. 6142--><p class="noindent" >APFS verbose output can be useful for debugging.
     </p></li>
     <li 
  class="enumerate" id="x1-69008x4">JumpstartHotPlug<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Load APFS drivers for newly connected devices.
     <!--l. 6150--><p class="noindent" ><span class="sout">Performs APFS driver loading not only </span><span class="uwave">Permits APFS USB hot plug which enables loading APFS drivers, both
     </span>at OpenCore startup <span class="sout">but also during the OpenCore picker . This permits APFS USB hot plug. </span><span class="uwave">and during
     OpenCore picker dusplay. </span>Disable if not required.
     </p></li>
     <li 
  class="enumerate" id="x1-69010x5">MinDate<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Minimal allowed APFS driver date.
     <!--l. 6160--><p class="noindent" ><span class="uwave">The </span>APFS driver date connects <span class="uwave">the </span>APFS driver with the calendar release date. <span class="sout">Older versions of APFS drivers
     may contain unpatched vulnerabilities , which </span><span class="uwave">Apple ultimately drops support for older macOS releases and
     APFS drivers from such releases may contain vulnerabilities that </span>can be used to <span class="sout">inflict harm to the computer
     </span><span class="uwave">compromise a computer if such drivers are used after support ends</span>. This option permits restricting APFS drivers
     to <span class="sout">only recent releases</span><span class="uwave">current macOS versions</span>.
</p>
         <ul class="itemize1">
         <li class="itemize">0 — require the default supported release date of APFS in OpenCore. The default release date will increase
         with time and thus this setting is recommended. Currently set to 2018/06/21.
         </li>
         <li class="itemize">-1 — permit any release date to load (strongly discouraged).
         </li>
                                                                                                  
                                                                                                  
         <li class="itemize">Other — use custom minimal APFS release date, e.g. 20200401 for 2020/04/01. APFS release dates can be
         found in OpenCore boot log and <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Acidanthera/Library/OcApfsLib.h" >OcApfsLib</a>.</li></ul>
     </li>
     <li 
  class="enumerate" id="x1-69012x6">MinVersion<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Minimal allowed APFS driver version.
     <!--l. 6184--><p class="noindent" ><span class="uwave">The </span>APFS driver version connects <span class="uwave">the </span>APFS driver with the macOS release. <span class="sout">APFS drivers from </span><span class="uwave">Apple ultimately drops
     support for </span>older macOS releases <span class="sout">will become unsupported and thus may contain unpatched vulnerabilities , which </span><span class="uwave">and
     APFS drivers from such releases may contain vulnerabilities that </span>can be used to <span class="sout">inflict harm to the computer
     </span><span class="uwave">compromise a computer if such drivers are used after support ends</span>. This option permits restricting APFS drivers to <span class="sout">only
     modern </span><span class="uwave">current </span>macOS versions.
</p>
         <ul class="itemize1">
         <li class="itemize">0 — require the default supported version of APFS in OpenCore. The default version will increase with
         time and thus this setting is recommended. Currently set to the latest point release from High Sierra from
         App Store (748077008000000).
         </li>
         <li class="itemize">-1 — permit any version to load (strongly discouraged).
         </li>
         <li class="itemize">Other — use custom minimal APFS version, e.g. 1412101001000000 from macOS Catalina 10.15.4. APFS
         versions can be found in OpenCore boot log and <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Acidanthera/Library/OcApfsLib.h" >OcApfsLib</a>.</li></ul>
     </li></ol>
<a 
 id="x1-69013r73"></a>
<h4 class="subsectionHead"><span class="titlemark">11.8   </span> <a 
 id="x1-700008"></a>Audio Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-70002x1">AudioCodec<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Codec address on the specified audio controller for audio support.
     <!--l. 6217--><p class="noindent" ><span class="sout">Normally this contains </span><span class="uwave">This typically contains the </span>first audio codec address on the builtin analog audio controller
     (HDEF). Audio codec addresses, e.g. 2, can be found in the debug log (marked in bold-italic):
     </p><!--l. 6220--><p class="noindent" >OCAU: 1/3 PciRoot(0x0)/Pci(0x1,0x0)/Pci(0x0,0x1)/VenMsg(&#x003C;redacted&#x003E;,00000000) (4 outputs)<br 
class="newline" />OCAU: 2/3 PciRoot(0x0)/Pci(0x3,0x0)/VenMsg(&#x003C;redacted&#x003E;,00000000) (1 outputs)<br 
class="newline" />OCAU: 3/3 PciRoot(0x0)/Pci(0x1B,0x0)/VenMsg(&#x003C;redacted&#x003E;,02000000) (7 outputs)
     </p><!--l. 6224--><p class="noindent" >As an alternative<span class="uwave">, </span>this value can be obtained from IOHDACodecDevice class in I/O Registry containing it in
     IOHDACodecAddress field.
     </p></li>
     <li 
  class="enumerate" id="x1-70004x2">AudioDevice<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Device path of the specified audio controller for audio support.
     <!--l. 6233--><p class="noindent" ><span class="sout">Normally   this   </span><span class="uwave">This   typically   </span>contains   builtin   analog   audio   controller   (HDEF)   device   path,   e.g.
     PciRoot(0x0)/Pci(0x1b,0x0). The list of recognised audio controllers can be found in the debug log (marked
     in bold-italic):
     </p><!--l. 6237--><p class="noindent" >OCAU: 1/3 PciRoot(0x0)/Pci(0x1,0x0)/Pci(0x0,0x1)/VenMsg(&#x003C;redacted&#x003E;,00000000) (4 outputs)<br 
class="newline" />OCAU: 2/3 PciRoot(0x0)/Pci(0x3,0x0)/VenMsg(&#x003C;redacted&#x003E;,00000000) (1 outputs)<br 
class="newline" />OCAU: 3/3 PciRoot(0x0)/Pci(0x1B,0x0)/VenMsg(&#x003C;redacted&#x003E;,02000000) (7 outputs)
     </p><!--l. 6241--><p class="noindent" >As an alternative<span class="uwave">, </span>gfxutil -f HDEF command can be used in macOS. Specifying <span class="uwave">an </span>empty device path will
     result in the first available audio controller <span class="sout">to be </span><span class="uwave">being </span>used.
                                                                                                  
                                                                                                  
     </p></li>
     <li 
  class="enumerate" id="x1-70006x3">AudioOut<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Index of the output port of the specified codec starting from 0.
     <!--l. 6250--><p class="noindent" ><span class="sout">Normally this </span><span class="uwave">This typically </span>contains the index of the green out of the builtin analog audio controller (HDEF).
     The number of output nodes (N) in the debug log (marked in bold-italic):
     </p><!--l. 6253--><p class="noindent" >OCAU: 1/3 PciRoot(0x0)/Pci(0x1,0x0)/Pci(0x0,0x1)/VenMsg(&#x003C;redacted&#x003E;,00000000) (4 outputs)<br 
class="newline" />OCAU: 2/3 PciRoot(0x0)/Pci(0x3,0x0)/VenMsg(&#x003C;redacted&#x003E;,00000000) (1 outputs)<br 
class="newline" />OCAU: 3/3 PciRoot(0x0)/Pci(0x1B,0x0)/VenMsg(&#x003C;redacted&#x003E;,02000000) (7 outputs)
     </p><!--l. 6257--><p class="noindent" >The quickest way to find the right port is to bruteforce the values from 0 to N - 1.
     </p></li>
     <li 
  class="enumerate" id="x1-70008x4">AudioSupport<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Activate audio support by connecting to a backend driver.
     <!--l. 6265--><p class="noindent" >Enabling this setting routes audio playback from builtin protocols to a dedicated audio port (AudioOut) of the
     specified codec (AudioCodec) located on the audio controller (AudioDevice).
     </p></li>
     <li 
  class="enumerate" id="x1-70010x5">MinimumVolume<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Minimal heard volume level from 0 to 100.
     <!--l. 6275--><p class="noindent" ><span class="sout">Screen  </span><span class="uwave">The  screen  </span>reader  will  use  this  volume  level  <span class="sout">,  </span>when  the  calculated  volume  level  is  <span class="sout">less  </span><span class="uwave">lower  </span>than
     MinimumVolume <span class="sout">. Boot chime sound </span><span class="uwave">and the boot chime </span>will not play if the calculated volume level is <span class="sout">less </span><span class="uwave">lower
     </span>than MinimumVolume.
     </p></li>
     <li 
  class="enumerate" id="x1-70012x6">PlayChime<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Auto<br 
class="newline" />Description: Play chime sound at startup.
     <!--l. 6285--><p class="noindent" >Enabling  this  setting  plays  <span class="sout">boot  chime  through  </span><span class="uwave">the  boot  chime  using  the  </span>builtin  audio  support.  <span class="sout">Volume
     </span><span class="uwave">The  volume  </span>level  is  determined  by  <span class="uwave">the  </span>MinimumVolume and  VolumeAmplifier settings  <span class="sout">and  </span><span class="uwave">as  well  as  the
     </span>SystemAudioVolume NVRAM variable. Possible values include:
</p>
         <ul class="itemize1">
         <li class="itemize">Auto — Enables chime when StartupMute NVRAM variable is not present or set to 00.
         </li>
         <li class="itemize">Enabled — Enables chime unconditionally.
         </li>
         <li class="itemize">Disabled — Disables chime unconditionally.</li></ul>
     <!--l. 6298--><p class="noindent" >Note: Enabled can be used in separate from StartupMute NVRAM variable to avoid conflicts when the firmware is able
     to play <span class="uwave">the </span>boot chime.
     </p></li>
     <li 
  class="enumerate" id="x1-70014x7">ResetTrafficClass<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Set HDA Traffic Class Select Register to TC0.
     <!--l. 6307--><p class="noindent" >AppleHDA kext will function correctly only if TCSEL register is configured to use TC0 traffic class. Refer to Intel I/O
     Controller Hub 9 (ICH9) Family Datasheet (or any other ICH datasheet) for more details about this
     register.
                                                                                                  
                                                                                                  
     </p><!--l. 6311--><p class="noindent" >Note: This option is independent from AudioSupport. If AppleALC is used it is preferred to use AppleALC alctsel
     property instead.
     </p></li>
     <li 
  class="enumerate" id="x1-70016x8">SetupDelay<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Audio codec reconfiguration delay in microseconds.
     <!--l. 6320--><p class="noindent" >Some codecs require a vendor-specific delay after the reconfiguration (e.g. volume setting). This option makes it
     configurable. A typical delay can be up to 0.5 seconds.
     </p></li>
     <li 
  class="enumerate" id="x1-70018x9">VolumeAmplifier<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Multiplication coefficient for system volume to raw volume linear translation from 0 to
     1000.
     <!--l. 6331--><p class="noindent" >Volume level range read from SystemAudioVolume varies depending on the codec. To transform read
     value in [0, 127] range into raw volume range [0, 100] the read value is scaled to VolumeAmplifier
     percents:
     </p><table 
class="align-star">
                 <tr><td 
class="align-odd">RawV olume</td>                 <td 
class="align-even"> = MIN(<img 
src="Differences3x.png" alt="SystemAudioV--olume-∗-VolumeAmplif-ier-
                100"  class="frac" align="middle" />,100)</td>                 <td 
class="align-label"></td>                 <td 
class="align-label"></td></tr></table>
     <!--l. 6337--><p class="noindent" >Note: the transformation used in macOS is not linear, but it is very close and this nuance is thus ignored.
</p>
     </li></ol>
<a 
 id="x1-70019r74"></a>
<h4 class="subsectionHead"><span class="titlemark">11.9   </span> <a 
 id="x1-710009"></a>Input Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-71002x1">KeyFiltering<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Enable keyboard input sanity checking.
     <!--l. 6352--><p class="noindent" >Apparently some boards such as the GA Z77P-D3 may return uninitialised data in EFI_INPUT_KEY with all input
     protocols. This option discards keys that are neither ASCII, nor are defined in the UEFI specification (see tables
     107 and 108 in version 2.8).
                                                                                                  
                                                                                                  
     </p></li>
     <li 
  class="enumerate" id="x1-71004x2">KeyForgetThreshold<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Remove key unless it was submitted during this timeout in <span class="sout">milliseconds</span><span class="uwave">10 ms units</span>.
     <!--l. 6363--><p class="noindent" >AppleKeyMapAggregator protocol is supposed to contain a fixed length buffer of currently pressed keys. However,
     the majority of the drivers only report key presses as interrupts and pressing and holding the key on the keyboard
     results in subsequent submissions of this key with some defined time interval. As a result we use a timeout to
     remove once pressed keys from the buffer once the timeout expires and no new submission of this key happened.
     </p><!--l. 6370--><p class="noindent" >This option allows <span class="sout">to set </span><span class="uwave">setting </span>this timeout based on the platform. The recommended value <span class="sout">that works on </span><span class="uwave">for
     </span>the majority of <span class="sout">the </span>platforms is 5 <span class="sout">milliseconds</span><span class="uwave">(</span><span class="uwave">50</span> <span class="uwave">milliseconds)</span>. For reference, holding one key on VMware will
     repeat it roughly every <span class="sout">2</span><span class="uwave">20</span> milliseconds and the same value for APTIO V is <span class="sout">3-4</span><span class="uwave">30-40</span> milliseconds. Thus<span class="uwave">, </span>it is
     possible to set a slightly lower value on faster platforms and <span class="uwave">a </span>slightly higher value on slower platforms for more
     responsive input.
     </p><!--l. 6377--><p class="noindent" >Pressing keys one after the other results in delays of at least <span class="sout">6</span><span class="uwave">60</span> and <span class="sout">10</span><span class="uwave">100</span> milliseconds for the same platforms.
     </p><!--l. 6380--><p class="noindent" >Note: Some platforms may require different values, <span class="uwave">which may be </span>higher or lower. For example, when detecting
     key misses in OpenCanopy<span class="uwave">, </span>try increasing this value (e.g. to 10), and when detecting key stall, try decreasing
     this value. Since every platform is different<span class="uwave">, </span>it may be <span class="sout">reasonable </span><span class="uwave">prudent </span>to check every value from 1 to 25 <span class="uwave">(</span><span class="uwave">10</span>
     <span class="uwave">to </span><span class="uwave">250</span> <span class="uwave">milliseconds)</span>.
     </p></li>
     <li 
  class="enumerate" id="x1-71006x3">KeySupport<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Enable internal keyboard input translation to AppleKeyMapAggregator protocol.
     <!--l. 6393--><p class="noindent" >This option activates the internal keyboard interceptor driver, based on AppleGenericInput, also known as
     AptioInputFix, to fill <span class="uwave">the </span>AppleKeyMapAggregator database for input functioning. In <span class="sout">case </span><span class="uwave">cases where </span>a separate
     driver <span class="sout">is used, </span>such as OpenUsbKbDxe <span class="uwave">is used</span>, this option should never be enabled.
     </p></li>
     <li 
  class="enumerate" id="x1-71008x4">KeySupportMode<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Auto<br 
class="newline" />Description: Set internal keyboard input translation to AppleKeyMapAggregator protocol mode.
         <ul class="itemize1">
         <li class="itemize">Auto — Performs automatic choice as available with the following preference: AMI, V2, V1.
         </li>
         <li class="itemize">V1 — Uses UEFI standard legacy input protocol EFI_SIMPLE_TEXT_INPUT_PROTOCOL.
         </li>
         <li class="itemize">V2 — Uses UEFI standard modern input protocol EFI_SIMPLE_TEXT_INPUT_EX_PROTOCOL.
         </li>
         <li class="itemize">AMI — Uses APTIO input protocol AMI_EFIKEYCODE_PROTOCOL.</li></ul>
     <!--l. 6415--><p class="noindent" >Note: Currently V1, V2, and AMI unlike Auto only do filtering of the particular specified protocol. This may change in the
     future versions.
     </p></li>
     <li 
  class="enumerate" id="x1-71010x5">KeySwap<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Swap Command and Option keys during submission.
     <!--l. 6424--><p class="noindent" >This option may be useful for keyboard layouts with Option key situated to the right of Command key.
     </p></li>
     <li 
  class="enumerate" id="x1-71012x6">PointerSupport<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Enable internal pointer driver.
     <!--l. 6433--><p class="noindent" >This option implements standard UEFI pointer protocol (EFI_SIMPLE_POINTER_PROTOCOL) through certain
     OEM protocols. The option may be useful on Z87 ASUS boards, where EFI_SIMPLE_POINTER_PROTOCOL is
     defective.
     </p></li>
     <li 
  class="enumerate" id="x1-71014x7">PointerSupportMode<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty<br 
class="newline" />Description: Set OEM protocol used for internal pointer driver.
     <!--l. 6443--><p class="noindent" >Currently the only supported variant is ASUS, using specialised protocol available on certain Z87 and Z97 ASUS boards.
     More details can be found in <a 
href="https://github.com/LongSoft/UEFITool/pull/116" >LongSoft/UefiTool#116</a>. The value of this property cannot be empty if PointerSupport is
     enabled.
     </p></li>
     <li 
  class="enumerate" id="x1-71016x8">TimerResolution<br 
class="newline" />Type: plist integer<br 
class="newline" />Failsafe: 0<br 
class="newline" />Description: Set architecture timer resolution.
     <!--l. 6454--><p class="noindent" >This option allows <span class="sout">to update </span><span class="uwave">updating the </span>firmware architecture timer period with the specified value in 100 nanosecond
     units. Setting a lower value <span class="sout">generally </span><span class="uwave">typically </span>improves performance and responsiveness of the interface and input
     handling.
     </p><!--l. 6458--><p class="noindent" >The recommended value is 50000 (5 milliseconds) or slightly higher. Select ASUS Z87 boards use 60000 for the interface.
     Apple boards use 100000. In case of issues, this option can be left as 0.
</p>
     </li></ol>
<a 
 id="x1-71017r75"></a>
<h4 class="subsectionHead"><span class="titlemark">11.10   </span> <a 
 id="x1-7200010"></a>Output Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-72002x1">TextRenderer<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: BuiltinGraphics<br 
class="newline" />Description: Chooses renderer for text going through standard console output.
     <!--l. 6475--><p class="noindent" >Currently two renderers are supported: Builtin and System. System renderer uses firmware services for text
     rendering. Builtin bypassing firmware services and performs text rendering on its own. Different renderers
     support a different set of options. It is recommended to use Builtin renderer, as it supports HiDPI mode and
     uses full screen resolution.
     </p><!--l. 6482--><p class="noindent" >UEFI firmware <span class="sout">generally </span><span class="uwave">typically </span>supports ConsoleControl with two rendering modes: Graphics and Text.
     Some types of firmware do not support ConsoleControl and rendering modes. OpenCore and macOS expect
     text to only be shown in Graphics mode and graphics to be drawn in any mode. Since this is not required by
     UEFI specification, exact behaviour varies.
     </p><!--l. 6489--><p class="noindent" >Valid values are combinations of text renderer and rendering mode:
</p>
         <ul class="itemize1">
         <li class="itemize">BuiltinGraphics — Switch to Graphics mode and use Builtin renderer with custom ConsoleControl.
         </li>
         <li class="itemize">BuiltinText — Switch to Text mode and use Builtin renderer with custom ConsoleControl.
         </li>
         <li class="itemize">SystemGraphics — Switch to Graphics mode and use System renderer with custom ConsoleControl.
         </li>
         <li class="itemize">SystemText — Switch to Text mode and use System renderer with custom ConsoleControl.
                                                                                                  
                                                                                                  
         </li>
         <li class="itemize">SystemGeneric — Use System renderer with system ConsoleControl assuming it behaves correctly.</li></ul>
     <!--l. 6509--><p class="noindent" >The use of BuiltinGraphics is <span class="sout">generally </span>straightforward. For most platforms<span class="uwave">, </span>it is necessary to enable
     ProvideConsoleGop <span class="sout">, </span><span class="uwave">and </span>set Resolution to Max. <span class="uwave">The </span>BuiltinText variant is an alternative BuiltinGraphics for some
     very old and defective laptop firmware, which can only draw in Text mode.
     </p><!--l. 6516--><p class="noindent" >The use of System protocols is more complicated. Typically, the preferred setting is SystemGraphics or SystemText.
     Enabling ProvideConsoleGop, setting Resolution to Max, enabling ReplaceTabWithSpace is useful on almost all
     platforms. SanitiseClearScreen, IgnoreTextInGraphics, and ClearScreenOnModeSwitch are more specific, and their
     use depends on the firmware.
     </p><!--l. 6524--><p class="noindent" >Note: Some Macs, such as the MacPro5,1, may have incompatible console output when using modern GPUs, and thus
     only BuiltinGraphics may work for them in such cases. NVIDIA GPUs may require additional <a 
href="https://github.com/acidanthera/bugtracker/issues/1280" >firmware
     upgrades</a>.
     </p></li>
     <li 
  class="enumerate" id="x1-72004x2">ConsoleMode<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty (Maintain current console mode)<br 
class="newline" />Description: Sets console output mode as specified with the WxH (e.g. 80x24) formatted string.
     <!--l. 6536--><p class="noindent" >Set to Max to attempt using the largest available console mode. This option is currently ignored as the Builtin text
     renderer only supports one console mode.
     </p><!--l. 6540--><p class="noindent" >Note: This field is best left empty on most types of firmware.
     </p></li>
     <li 
  class="enumerate" id="x1-72006x3">Resolution<br 
class="newline" />Type: plist string<br 
class="newline" />Failsafe: Empty (Maintain current screen resolution)<br 
class="newline" />Description: Sets console output screen resolution.
         <ul class="itemize1">
         <li class="itemize">Set to WxH@Bpp (e.g. 1920x1080@32) or WxH (e.g. 1920x1080) formatted string to request custom resolution
         from GOP if available.
         </li>
         <li class="itemize">Set to Max to attempt using the largest available screen resolution.</li></ul>
     <!--l. 6557--><p class="noindent" >On HiDPI screens APPLE_VENDOR_VARIABLE_GUID UIScale NVRAM variable may need to be set to 02 to enable HiDPI
     scaling in Builtin text renderer, FileVault 2 UEFI password interface, and boot screen logo. Refer to the <a 
href="#x1-520004">Recommended
     Variables</a> section for more details.
     </p><!--l. 6563--><p class="noindent" >Note: This will fail when console handle has no GOP protocol. When the firmware does not provide it, it can be added
     with ProvideConsoleGop set to true.
     </p></li>
     <li 
  class="enumerate" id="x1-72008x4">ForceResolution<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Forces Resolution to be set in cases where the desired resolution is not available by default, such as on
     legacy Intel GMA and first generation Intel HD Graphics (Ironlake/Arrandale). Setting Resolution to Max will try to
     pull the largest available resolution from the connected display’s EDID.
     <!--l. 6577--><p class="noindent" >Note: This option depends on the <a 
href="https://github.com/acidanthera/OpenCorePkg/blob/master/Include/Acidanthera/Protocol/OcForceResolution.h" >OC_FORCE_RESOLUTION_PROTOCOL</a> protocol being present. This protocol is
     currently only supported by OpenDuetPkg. The OpenDuetPkg implementation currently only supports Intel
     iGPUs.
     </p></li>
     <li 
  class="enumerate" id="x1-72010x5">ClearScreenOnModeSwitch<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Some types of firmware only clear part of the screen when switching from graphics to text mode, leaving a
     fragment of previously drawn images visible. This option fills the entire graphics screen with black colour before switching
                                                                                                  
                                                                                                  
     when the screen resolution is changed via GOP. Otherwise, they will not produce text based on the new
     resolution.
     </p><!--l. 6659--><p class="noindent" >Note: On several boards this logic may result in black screen when launching OpenCore from Shell and thus it is
     optional. In versions prior to 0.5.2 this option was mandatory and not configurable. Please do not use this unless
     required.
     </p></li>
     <li 
  class="enumerate" id="x1-72024x12">SanitiseClearScreen<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Some types of firmware reset screen resolutions to a failsafe value (such as 1024x768) on the
     attempts to clear screen contents when large display (e.g. 2K or 4K) is used. This option attempts to apply a
     workaround.
     <!--l. 6672--><p class="noindent" >Note: This option only applies to the System renderer. On all known affected systems, ConsoleMode must be set to an
     empty string for this option to work.
     </p></li>
     <li 
  class="enumerate" id="x1-72026x13">UgaPassThrough<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Provide UGA protocol instances on top of GOP protocol instances.
     <!--l. 6682--><p class="noindent" >Some types of firmware do not implement the legacy UGA protocol but this may be required for screen output by older
     EFI applications such as EfiBoot from 10.4.
</p>
     </li></ol>
<a 
 id="x1-72027r76"></a>
<h4 class="subsectionHead"><span class="titlemark">11.11   </span> <a 
 id="x1-7300011"></a>ProtocolOverrides Properties</h4>
     <ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-73002x1">AppleAudio<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces Apple audio protocols with builtin versions.
     <!--l. 6699--><p class="noindent" >Apple audio protocols allow <span class="sout">macOS bootloader and OpenCore </span><span class="uwave">OpenCore and the macOS bootloader </span>to play
     sounds  and  signals  for  screen  reading  or  audible  error  reporting.  Supported  protocols  are  beep  generation
     and VoiceOver. <span class="uwave">The </span>VoiceOver protocol is specific to Gibraltar machines (T2) and is not supported before
     macOS High Sierra (10.13). <span class="sout">Instead older </span><span class="uwave">Older </span>macOS versions use <span class="sout">AppleHDA protocol, which is currently not
     implemented</span><span class="uwave">the AppleHDA protocol (which is not currently implemented) instead</span>.
     </p><!--l. 6707--><p class="noindent" >Only one set of audio protocols can be available at a time, so <span class="uwave">this setting should be enabled </span>in order to <span class="sout">get </span><span class="uwave">enable
     </span>audio playback in <span class="uwave">the </span>OpenCore user interface on Mac <span class="sout">system </span><span class="uwave">systems </span>implementing some of these protocols<span class="sout">this
     setting should be enabled</span>.
     </p><!--l. 6711--><p class="noindent" >Note: <span class="sout">Backend </span><span class="uwave">The backend </span>audio driver needs to be configured in UEFI Audio section for these protocols to be
     able to stream audio.
     </p></li>
     <li 
  class="enumerate" id="x1-73004x2">AppleBootPolicy<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple Boot Policy protocol with a builtin version. This may be used to ensure APFS
     compatibility on VMs and legacy Macs.
     <!--l. 6721--><p class="noindent" >Note: This option is advisable on certain Macs, such as the MacPro5,1, that are APFS compatible but on which
     the Apple Boot Policy protocol has recovery detection issues.
     </p></li>
     <li 
  class="enumerate" id="x1-73006x3">AppleDebugLog<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple Debug Log protocol with a builtin version.
     </li>
     <li 
  class="enumerate" id="x1-73008x4">AppleEvent<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple Event protocol with a builtin version. This may be used to ensure FileVault
     2 compatibility on VMs and legacy Macs.
     </li>
     <li 
  class="enumerate" id="x1-73010x5">AppleFramebufferInfo<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple Framebuffer Info protocol with a builtin version. This may be used to override
     framebuffer information on VMs and legacy Macs to improve compatibility with legacy EfiBoot such as the one
     in macOS 10.4.
     <!--l. 6747--><p class="noindent" >Note: The current implementation of this property results in it only being active when GOP is available (it is
     always equivalent to false otherwise).
     </p></li>
     <li 
  class="enumerate" id="x1-73012x6">AppleImageConversion<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple Image Conversion protocol with a builtin version.
     </li>
     <li 
  class="enumerate" id="x1-73014x7">AppleImg4Verification<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple IMG4 Verification protocol with a builtin version. This protocol is used to
     verify im4m manifest files used by Apple Secure Boot.
     </li>
     <li 
  class="enumerate" id="x1-73016x8">AppleKeyMap<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces Apple Key Map protocols with builtin versions.
     </li>
     <li 
  class="enumerate" id="x1-73018x9">AppleRtcRam<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple RTC RAM protocol with a builtin version.
     <!--l. 6779--><p class="noindent" >Note: Builtin version of Apple RTC RAM protocol may filter out I/O attempts to certain RTC memory addresses.
     The list of addresses can be specified in 4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:rtc-blacklist variable as
     a data array.
     </p></li>
     <li 
  class="enumerate" id="x1-73020x10">AppleSecureBoot<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple Secure Boot protocol with a builtin version.
     </li>
     <li 
  class="enumerate" id="x1-73022x11">AppleSmcIo<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple SMC I/O protocol with a builtin version.
                                                                                                  
                                                                                                  
     <!--l. 6798--><p class="noindent" >This protocol replaces <span class="uwave">the </span>legacy VirtualSmc UEFI driver, and is compatible with any SMC kernel extension.
     However, in case FakeSMC kernel extension is used, manual NVRAM key variable addition may be needed.
     </p></li>
     <li 
  class="enumerate" id="x1-73024x12">AppleUserInterfaceTheme<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Apple User Interface Theme protocol with a builtin version.
     </li>
     <li 
  class="enumerate" id="x1-73026x13">DataHub<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Data Hub protocol with a builtin version.
     <!--l. 6815--><p class="noindent" >Note: This will discard all previous entries if the protocol was already installed, so all properties required for <span class="uwave">the
     </span>safe operation of the system must be specified in <span class="sout">your configuration </span><span class="uwave">the configuration file</span>.
     </p></li>
     <li 
  class="enumerate" id="x1-73028x14">DeviceProperties<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the Device Property protocol with a builtin version. This may be used to ensure full
     compatibility on VMs and legacy Macs.
     <!--l. 6826--><p class="noindent" >Note: This will discard all previous entries if the protocol was already installed, so all properties required for safe
     operation of the system must be specified in <span class="sout">your configuration </span><span class="uwave">the configuration file</span>.
     </p></li>
     <li 
  class="enumerate" id="x1-73030x15">FirmwareVolume<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Wraps Firmware Volume protocols<span class="uwave">, </span>or installs a new version<span class="uwave">, </span>to support custom cursor images for
     FileVault 2. Set to true to ensure FileVault 2 compatibility on anything other than on VMs and legacy Macs.
     <!--l. 6838--><p class="noindent" >Note: Several virtual machines<span class="sout">including VMware </span><span class="uwave">, including VMware, </span>may have corrupted cursor images in
     HiDPI mode and thus, may also require enabling this setting.
     </p></li>
     <li 
  class="enumerate" id="x1-73032x16">HashServices<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description:  Replaces  Hash  Services  protocols  with  builtin  versions.  Set  to  true to  ensure  FileVault  2
     compatibility on platforms with defective SHA-1 hash implementations. This can be determined by an invalid
     cursor size when UIScale is set to 02. Platforms earlier than APTIO V (Haswell and older) are typically affected.
     </li>
     <li 
  class="enumerate" id="x1-73034x17">OSInfo<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description: Replaces the OS Info protocol with a builtin version. This protocol is typically used by the firmware
     and other applications to receive notifications from the macOS bootloader.
     </li>
     <li 
  class="enumerate" id="x1-73036x18">UnicodeCollation<br 
class="newline" />Type: plist boolean<br 
class="newline" />Failsafe: false<br 
class="newline" />Description:  Replaces  unicode  collation  services  with  builtin  versions.  Set  to  true to  ensure  UEFI  Shell
     compatibility  on  platforms  with  defective  unicode  collation  implementations.  Legacy  Insyde  and  APTIO
     platforms on Ivy Bridge, and earlier, are typically affected.
     </li></ol>
<a 
 id="x1-73037r77"></a>
                                                                                                  
                                                                                                  
     
     
     
     
     
      
     
     
      
     
                                                                                                                                                                                                                                                                                                                     </body>
</html>